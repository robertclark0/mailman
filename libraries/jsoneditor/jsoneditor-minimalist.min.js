/*!
 * jsoneditor.js
 *
 * @brief
 * JSONEditor is a web-based tool to view, edit, format, and validate JSON.
 * It has various modes such as a tree editor, a code editor, and a plain text
 * editor.
 *
 * Supported browsers: Chrome, Firefox, Safari, Opera, Internet Explorer 8+
 *
 * @license
 * Licensed under the Apache License, Version 2.0 (the "License"); you may not
 * use this file except in compliance with the License. You may obtain a copy
 * of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS, WITHOUT
 * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the
 * License for the specific language governing permissions and limitations under
 * the License.
 *
 * Copyright (c) 2011-2016 Jos de Jong, http://jsoneditoronline.org
 *
 * @author  Jos de Jong, <wjosdejong@gmail.com>
 * @version 5.5.10
 * @date    2016-11-02
 */
(function(n,t){typeof exports=="object"&&typeof module=="object"?module.exports=t():typeof define=="function"&&define.amd?define([],t):typeof exports=="object"?exports.JSONEditor=t():n.JSONEditor=t()})(this,function(){return function(n){function t(r){if(i[r])return i[r].exports;var u=i[r]={exports:{},id:r,loaded:!1};return n[r].call(u.exports,u,u.exports,t),u.loaded=!0,u.exports}var i={};return t.m=n,t.c=i,t.p="",t(0)}([function(n,t,i){"use strict";function r(n,t,i){var f,e;if(!(this instanceof r))throw new Error('JSONEditor constructor called without "new".');if(f=u.getInternetExplorerVersion(),f!=-1&&f<9)throw new Error("Unsupported browser, IE9 or newer required. Please install the newest version of your browser.");t&&(t.error&&(console.warn('Option "error" has been renamed to "onError"'),t.onError=t.error,delete t.error),t.change&&(console.warn('Option "change" has been renamed to "onChange"'),t.onChange=t.change,delete t.change),t.editable&&(console.warn('Option "editable" has been renamed to "onEditable"'),t.onEditable=t.editable,delete t.editable),t&&(e=["ace","theme","ajv","schema","onChange","onEditable","onError","onModeChange","escapeUnicode","history","search","mode","modes","name","indentation","sortObjectKeys"],Object.keys(t).forEach(function(n){e.indexOf(n)===-1&&console.warn('Unknown option "'+n+'". This option will be ignored')})));arguments.length&&this._create(n,t,i)}var f;try{f=i(!function(){var n=new Error('Cannot find module "ajv"');n.code="MODULE_NOT_FOUND";throw n;}())}catch(h){}var e=i(1),o=i(12),u=i(4);r.modes={};r.prototype.DEBOUNCE_INTERVAL=150;r.prototype._create=function(n,t,i){this.container=n;this.options=t||{};this.json=i||{};var r=this.options.mode||"tree";this.setMode(r)};r.prototype.destroy=function(){};r.prototype.set=function(n){this.json=n};r.prototype.get=function(){return this.json};r.prototype.setText=function(n){this.json=u.parse(n)};r.prototype.getText=function(){return JSON.stringify(this.json)};r.prototype.setName=function(n){this.options||(this.options={});this.options.name=n};r.prototype.getName=function(){return this.options&&this.options.name};r.prototype.setMode=function(n){var c=this.container,t=u.extend({},this.options),o=t.mode,s,h,i,f;if(t.mode=n,i=r.modes[n],i)try{if(f=i.data=="text",h=this.getName(),s=this[f?"getText":"get"](),this.destroy(),u.clear(this),u.extend(this,i.mixin),this.create(c,t),this.setName(h),this[f?"setText":"set"](s),typeof i.load=="function")try{i.load.call(this)}catch(e){console.error(e)}if(typeof t.onModeChange=="function"&&n!==o)try{t.onModeChange(n,o)}catch(e){console.error(e)}}catch(e){this._onError(e)}else throw new Error('Unknown mode "'+t.mode+'"');};r.prototype.getMode=function(){return this.options.mode};r.prototype._onError=function(n){if(this.options&&typeof this.options.onError=="function")this.options.onError(n);else throw n;};r.prototype.setSchema=function(n){if(n){var t;try{t=this.options.ajv||f({allErrors:!0,verbose:!0})}catch(i){console.warn("Failed to create an instance of Ajv, JSON Schema validation is not available. Please use a JSONEditor bundle including Ajv, or pass an instance of Ajv as via the configuration option `ajv`.")}t&&(this.validateSchema=t.compile(n),this.options.schema=n,this.validate());this.refresh()}else this.validateSchema=null,this.options.schema=null,this.validate(),this.refresh()};r.prototype.validate=function(){};r.prototype.refresh=function(){};r.registerMode=function(n){var t,f,i,e;if(u.isArray(n))for(t=0;t<n.length;t++)r.registerMode(n[t]);else{if(!("mode"in n))throw new Error('Property "mode" missing');if(!("mixin"in n))throw new Error('Property "mixin" missing');if(!("data"in n))throw new Error('Property "data" missing');if(i=n.mode,i in r.modes)throw new Error('Mode "'+i+'" already registered');if(typeof n.mixin.create!="function")throw new Error('Required function "create" missing on mixin');for(e=["setMode","registerMode","modes"],t=0;t<e.length;t++)if(f=e[t],f in n.mixin)throw new Error('Reserved property "'+f+'" not allowed in mixin');r.modes[i]=n}};r.registerMode(e);r.registerMode(o);n.exports=r},function(n,t,i){"use strict";var e=i(2),o=i(3),s=i(6),h=i(7),f=i(8),c=i(11),u=i(4),r={};r.create=function(n,t){if(!n)throw new Error("No container element provided.");this.container=n;this.dom={};this.highlighter=new e;this.selection=undefined;this.multiselection={nodes:[]};this.validateSchema=null;this.errorNodes=[];this.node=null;this.focusTarget=null;this._setOptions(t);this.options.history&&this.options.mode!=="view"&&(this.history=new o(this));this._createFrame();this._createTable()};r.destroy=function(){this.frame&&this.container&&this.frame.parentNode==this.container&&(this.container.removeChild(this.frame),this.frame=null);this.container=null;this.dom=null;this.clear();this.node=null;this.focusTarget=null;this.selection=null;this.multiselection=null;this.errorNodes=null;this.validateSchema=null;this._debouncedValidate=null;this.history&&(this.history.destroy(),this.history=null);this.searchBox&&(this.searchBox.destroy(),this.searchBox=null);this.modeSwitcher&&(this.modeSwitcher.destroy(),this.modeSwitcher=null)};r._setOptions=function(n){if(this.options={search:!0,history:!0,mode:"tree",name:undefined,schema:null},n)for(var t in n)n.hasOwnProperty(t)&&(this.options[t]=n[t]);this.setSchema(this.options.schema);this._debouncedValidate=u.debounce(this.validate.bind(this),this.DEBOUNCE_INTERVAL)};r.set=function(n,t){var i,r,u;t&&(console.warn('Second parameter "name" is deprecated. Use setName(name) instead.'),this.options.name=t);n instanceof Function||n===undefined?this.clear():(this.content.removeChild(this.table),i={field:this.options.name,value:n},r=new f(this,i),this._setRoot(r),this.validate(),u=!1,this.node.expand(u),this.content.appendChild(this.table));this.history&&this.history.clear();this.searchBox&&this.searchBox.clear()};r.get=function(){if(this.focusTarget){var n=f.getNodeFromTarget(this.focusTarget);n&&n.blur()}return this.node?this.node.getValue():undefined};r.getText=function(){return JSON.stringify(this.get())};r.setText=function(n){this.set(u.parse(n))};r.setName=function(n){this.options.name=n;this.node&&this.node.updateField(this.options.name)};r.getName=function(){return this.options.name};r.focus=function(){var n=this.content.querySelector("[contenteditable=true]");n?n.focus():this.node.dom.expand?this.node.dom.expand.focus():this.node.dom.menu?this.node.dom.menu.focus():(n=this.frame.querySelector("button"),n&&n.focus())};r.clear=function(){this.node&&(this.node.collapse(),this.tbody.removeChild(this.node.getDom()),delete this.node)};r._setRoot=function(n){this.clear();this.node=n;this.tbody.appendChild(n.getDom())};r.search=function(n){var t;return this.node?(this.content.removeChild(this.table),t=this.node.search(n),this.content.appendChild(this.table)):t=[],t};r.expandAll=function(){this.node&&(this.content.removeChild(this.table),this.node.expand(),this.content.appendChild(this.table))};r.collapseAll=function(){this.node&&(this.content.removeChild(this.table),this.node.collapse(),this.content.appendChild(this.table))};r._onAction=function(n,t){this.history&&this.history.add(n,t);this._onChange()};r._onChange=function(){if(this._debouncedValidate(),this.options.onChange)try{this.options.onChange()}catch(n){console.error("Error in onChange callback: ",n)}};r.validate=function(){var n,i,t,r;(this.errorNodes&&this.errorNodes.forEach(function(n){n.setError(null)}),n=this.node,n)&&(i=n.validate(),t=[],this.validateSchema&&(r=this.validateSchema(n.getValue()),r||(t=this.validateSchema.errors.map(function(n){return u.improveSchemaError(n)}).map(function(t){return{node:n.findNode(t.dataPath),error:t}}).filter(function(n){return n.node!=null}))),this.errorNodes=i.concat(t).reduce(function(n,t){return t.node.findParents().map(function(n){return{node:n,child:t.node,error:{message:n.type==="object"?"Contains invalid properties":"Contains invalid items"}}}).concat(n,[t])},[]).map(function(n){return n.node.setError(n.error,n.child),n.node}))};r.refresh=function(){this.node&&this.node.updateDom({recurse:!0})};r.startAutoScroll=function(n){var r=this,t=this.content,f=u.getAbsoluteTop(t),e=t.clientHeight,o=f+e,i=24;this.autoScrollStep=n<f+i&&t.scrollTop>0?(f+i-n)/3:n>o-i&&e+t.scrollTop<t.scrollHeight?(o-i-n)/3:undefined;this.autoScrollStep?this.autoScrollTimer||(this.autoScrollTimer=setInterval(function(){r.autoScrollStep?t.scrollTop-=r.autoScrollStep:r.stopAutoScroll()},50)):this.stopAutoScroll()};r.stopAutoScroll=function(){this.autoScrollTimer&&(clearTimeout(this.autoScrollTimer),delete this.autoScrollTimer);this.autoScrollStep&&delete this.autoScrollStep};r.setSelection=function(n){n&&("scrollTop"in n&&this.content&&(this.content.scrollTop=n.scrollTop),n.nodes&&this.select(n.nodes),n.range&&u.setSelectionOffset(n.range),n.dom&&n.dom.focus())};r.getSelection=function(){var n=u.getSelectionOffset();return n&&n.container.nodeName!=="DIV"&&(n=null),{dom:this.focusTarget,range:n,nodes:this.multiselection.nodes.slice(0),scrollTop:this.content?this.content.scrollTop:0}};r.scrollTo=function(n,t){var r=this.content,i;if(r){i=this;i.animateTimeout&&(clearTimeout(i.animateTimeout),delete i.animateTimeout);i.animateCallback&&(i.animateCallback(!1),delete i.animateCallback);var u=r.clientHeight,o=r.scrollHeight-u,f=Math.min(Math.max(n-u/4,0),o),e=function(){var u=r.scrollTop,n=f-u;Math.abs(n)>3?(r.scrollTop+=n/3,i.animateCallback=t,i.animateTimeout=setTimeout(e,50)):(t&&t(!0),r.scrollTop=f,delete i.animateTimeout,delete i.animateCallback)};e()}else t&&t(!1)};r._createFrame=function(){function n(n){t._onEvent&&t._onEvent(n)}var t,f,e,i,r,o;this.frame=document.createElement("div");this.frame.className="jsoneditor jsoneditor-mode-"+this.options.mode;this.container.appendChild(this.frame);t=this;this.frame.onclick=function(t){var i=t.target;n(t);i.nodeName=="BUTTON"&&t.preventDefault()};this.frame.oninput=n;this.frame.onchange=n;this.frame.onkeydown=n;this.frame.onkeyup=n;this.frame.oncut=n;this.frame.onpaste=n;this.frame.onmousedown=n;this.frame.onmouseup=n;this.frame.onmouseover=n;this.frame.onmouseout=n;u.addEventListener(this.frame,"focus",n,!0);u.addEventListener(this.frame,"blur",n,!0);this.frame.onfocusin=n;this.frame.onfocusout=n;this.menu=document.createElement("div");this.menu.className="jsoneditor-menu";this.frame.appendChild(this.menu);f=document.createElement("button");f.type="button";f.className="jsoneditor-expand-all";f.title="Expand all fields";f.onclick=function(){t.expandAll()};this.menu.appendChild(f);e=document.createElement("button");e.type="button";e.title="Collapse all fields";e.className="jsoneditor-collapse-all";e.onclick=function(){t.collapseAll()};this.menu.appendChild(e);this.history&&(i=document.createElement("button"),i.type="button",i.className="jsoneditor-undo jsoneditor-separator",i.title="Undo last action (Ctrl+Z)",i.onclick=function(){t._onUndo()},this.menu.appendChild(i),this.dom.undo=i,r=document.createElement("button"),r.type="button",r.className="jsoneditor-redo",r.title="Redo (Ctrl+Shift+Z)",r.onclick=function(){t._onRedo()},this.menu.appendChild(r),this.dom.redo=r,this.history.onChange=function(){i.disabled=!t.history.canUndo();r.disabled=!t.history.canRedo()},this.history.onChange());this.options&&this.options.modes&&this.options.modes.length&&(o=this,this.modeSwitcher=new c(this.menu,this.options.modes,this.options.mode,function(n){o.modeSwitcher.destroy();o.setMode(n);o.modeSwitcher.focus()}));this.options.search&&(this.searchBox=new s(this,this.menu))};r._onUndo=function(){this.history&&(this.history.undo(),this._onChange())};r._onRedo=function(){this.history&&(this.history.redo(),this._onChange())};r._onEvent=function(n){n.type=="keydown"&&this._onKeyDown(n);n.type=="focus"&&(this.focusTarget=n.target);n.type=="mousedown"&&this._startDragDistance(n);(n.type=="mousemove"||n.type=="mouseup"||n.type=="click")&&this._updateDragDistance(n);var t=f.getNodeFromTarget(n.target);if(t&&t.selected){if(n.type=="click"){if(n.target==t.dom.menu){this.showContextMenu(n.target);return}n.hasMoved||this.deselect()}if(n.type=="mousedown")f.onDragStart(this.multiselection.nodes,n)}else if(n.type=="mousedown")if(this.deselect(),t&&n.target==t.dom.drag)f.onDragStart(t,n);else t&&(n.target==t.dom.field||n.target==t.dom.value||n.target==t.dom.select)||this._onMultiSelectStart(n);if(t)t.onEvent(n)};r._startDragDistance=function(n){this.dragDistanceEvent={initialTarget:n.target,initialPageX:n.pageX,initialPageY:n.pageY,dragDistance:0,hasMoved:!1}};r._updateDragDistance=function(n){this.dragDistanceEvent||this._startDragDistance(n);var t=n.pageX-this.dragDistanceEvent.initialPageX,i=n.pageY-this.dragDistanceEvent.initialPageY;return this.dragDistanceEvent.dragDistance=Math.sqrt(t*t+i*i),this.dragDistanceEvent.hasMoved=this.dragDistanceEvent.hasMoved||this.dragDistanceEvent.dragDistance>10,n.dragDistance=this.dragDistanceEvent.dragDistance,n.hasMoved=this.dragDistanceEvent.hasMoved,n.dragDistance};r._onMultiSelectStart=function(n){var i=f.getNodeFromTarget(n.target),t;this.options.mode==="tree"&&this.options.onEditable===undefined&&(this.multiselection={start:i||null,end:null,nodes:[]},this._startDragDistance(n),t=this,this.mousemove||(this.mousemove=u.addEventListener(window,"mousemove",function(n){t._onMultiSelect(n)})),this.mouseup||(this.mouseup=u.addEventListener(window,"mouseup",function(n){t._onMultiSelectEnd(n)})))};r._onMultiSelect=function(n){var t,i,r;(n.preventDefault(),this._updateDragDistance(n),n.hasMoved)&&(t=f.getNodeFromTarget(n.target),t&&(this.multiselection.start==null&&(this.multiselection.start=t),this.multiselection.end=t),this.deselect(),i=this.multiselection.start,r=this.multiselection.end||this.multiselection.start,i&&r&&(this.multiselection.nodes=this._findTopLevelNodes(i,r),this.select(this.multiselection.nodes)))};r._onMultiSelectEnd=function(){this.multiselection.nodes[0]&&this.multiselection.nodes[0].dom.menu.focus();this.multiselection.start=null;this.multiselection.end=null;this.mousemove&&(u.removeEventListener(window,"mousemove",this.mousemove),delete this.mousemove);this.mouseup&&(u.removeEventListener(window,"mouseup",this.mouseup),delete this.mouseup)};r.deselect=function(n){this.multiselection.nodes.forEach(function(n){n.setSelected(!1)});this.multiselection.nodes=[];n&&(this.multiselection.start=null,this.multiselection.end=null)};r.select=function(n){if(!Array.isArray(n))return this.select([n]);if(n){this.deselect();this.multiselection.nodes=n.slice(0);var t=n[0];n.forEach(function(n){n.setSelected(!0,n===t)})}};r._findTopLevelNodes=function(n,t){for(var e=n.getNodePath(),o=t.getNodePath(),r=0;r<e.length&&e[r]===o[r];)r++;var i=e[r-1],u=e[r],f=o[r];if(u&&f||(i.parent?(u=i,f=i,i=i.parent):(u=i.childs[0],f=i.childs[i.childs.length-1])),i&&u&&f){var s=i.childs.indexOf(u),h=i.childs.indexOf(f),c=Math.min(s,h),l=Math.max(s,h);return i.childs.slice(c,l+1)}return[]};r._onKeyDown=function(n){var t=n.which||n.keyCode,r=n.ctrlKey,f=n.shiftKey,i=!1,o,e;t==9&&(o=this,setTimeout(function(){u.selectContentEditable(o.focusTarget)},0));this.searchBox&&(r&&t==70?(this.searchBox.dom.search.focus(),this.searchBox.dom.search.select(),i=!0):(t==114||r&&t==71)&&(e=!0,f?this.searchBox.previous(e):this.searchBox.next(e),i=!0));this.history&&(r&&!f&&t==90?(this._onUndo(),i=!0):r&&f&&t==90&&(this._onRedo(),i=!0));i&&(n.preventDefault(),n.stopPropagation())};r._createTable=function(){var t=document.createElement("div"),n;t.className="jsoneditor-outer";this.contentOuter=t;this.content=document.createElement("div");this.content.className="jsoneditor-tree";t.appendChild(this.content);this.table=document.createElement("table");this.table.className="jsoneditor-tree";this.content.appendChild(this.table);this.colgroupContent=document.createElement("colgroup");this.options.mode==="tree"&&(n=document.createElement("col"),n.width="24px",this.colgroupContent.appendChild(n));n=document.createElement("col");n.width="24px";this.colgroupContent.appendChild(n);n=document.createElement("col");this.colgroupContent.appendChild(n);this.table.appendChild(this.colgroupContent);this.tbody=document.createElement("tbody");this.table.appendChild(this.tbody);this.frame.appendChild(t)};r.showContextMenu=function(n,t){var i=[],r=this,u;i.push({text:"Duplicate",title:"Duplicate selected fields (Ctrl+D)",className:"jsoneditor-duplicate",click:function(){f.onDuplicate(r.multiselection.nodes)}});i.push({text:"Remove",title:"Remove selected fields (Ctrl+Del)",className:"jsoneditor-remove",click:function(){f.onRemove(r.multiselection.nodes)}});u=new h(i,{close:t});u.show(n,this.content)};n.exports=[{mode:"tree",mixin:r,data:"json"},{mode:"view",mixin:r,data:"json"},{mode:"form",mixin:r,data:"json"}]},function(n){"use strict";function t(){this.locked=!1}t.prototype.highlight=function(n){this.locked||(this.node!=n&&(this.node&&this.node.setHighlight(!1),this.node=n,this.node.setHighlight(!0)),this._cancelUnhighlight())};t.prototype.unhighlight=function(){if(!this.locked){var n=this;this.node&&(this._cancelUnhighlight(),this.unhighlightTimer=setTimeout(function(){n.node.setHighlight(!1);n.node=undefined;n.unhighlightTimer=undefined},0))}};t.prototype._cancelUnhighlight=function(){this.unhighlightTimer&&(clearTimeout(this.unhighlightTimer),this.unhighlightTimer=undefined)};t.prototype.lock=function(){this.locked=!0};t.prototype.unlock=function(){this.locked=!1};n.exports=t},function(n,t,i){"use strict";function r(n){this.editor=n;this.history=[];this.index=-1;this.clear();this.actions={editField:{undo:function(n){n.node.updateField(n.oldValue)},redo:function(n){n.node.updateField(n.newValue)}},editValue:{undo:function(n){n.node.updateValue(n.oldValue)},redo:function(n){n.node.updateValue(n.newValue)}},changeType:{undo:function(n){n.node.changeType(n.oldType)},redo:function(n){n.node.changeType(n.newType)}},appendNodes:{undo:function(n){n.nodes.forEach(function(t){n.parent.removeChild(t)})},redo:function(n){n.nodes.forEach(function(t){n.parent.appendChild(t)})}},insertBeforeNodes:{undo:function(n){n.nodes.forEach(function(t){n.parent.removeChild(t)})},redo:function(n){n.nodes.forEach(function(t){n.parent.insertBefore(t,n.beforeNode)})}},insertAfterNodes:{undo:function(n){n.nodes.forEach(function(t){n.parent.removeChild(t)})},redo:function(n){var t=n.afterNode;n.nodes.forEach(function(i){n.parent.insertAfter(n.node,t);t=i})}},removeNodes:{undo:function(n){var t=n.parent,i=t.childs[n.index]||t.append;n.nodes.forEach(function(n){t.insertBefore(n,i)})},redo:function(n){n.nodes.forEach(function(t){n.parent.removeChild(t)})}},duplicateNodes:{undo:function(n){n.nodes.forEach(function(t){n.parent.removeChild(t)})},redo:function(n){var t=n.afterNode;n.nodes.forEach(function(i){n.parent.insertAfter(i,t);t=i})}},moveNodes:{undo:function(n){n.nodes.forEach(function(t){n.oldBeforeNode.parent.moveBefore(t,n.oldBeforeNode)})},redo:function(n){n.nodes.forEach(function(t){n.newBeforeNode.parent.moveBefore(t,n.newBeforeNode)})}},sort:{undo:function(n){var t=n.node;t.hideChilds();t.sort=n.oldSort;t.childs=n.oldChilds;t.showChilds()},redo:function(n){var t=n.node;t.hideChilds();t.sort=n.newSort;t.childs=n.newChilds;t.showChilds()}}}}var u=i(4);r.prototype.onChange=function(){};r.prototype.add=function(n,t){this.index++;this.history[this.index]={action:n,params:t,timestamp:new Date};this.index<this.history.length-1&&this.history.splice(this.index+1,this.history.length-this.index-1);this.onChange()};r.prototype.clear=function(){this.history=[];this.index=-1;this.onChange()};r.prototype.canUndo=function(){return this.index>=0};r.prototype.canRedo=function(){return this.index<this.history.length-1};r.prototype.undo=function(){var n,t;this.canUndo()&&(n=this.history[this.index],n&&(t=this.actions[n.action],t&&t.undo?(t.undo(n.params),n.params.oldSelection&&this.editor.setSelection(n.params.oldSelection)):console.error(new Error('unknown action "'+n.action+'"'))),this.index--,this.onChange())};r.prototype.redo=function(){var n,t;this.canRedo()&&(this.index++,n=this.history[this.index],n&&(t=this.actions[n.action],t&&t.redo?(t.redo(n.params),n.params.newSelection&&this.editor.setSelection(n.params.newSelection)):console.error(new Error('unknown action "'+n.action+'"'))),this.onChange())};r.prototype.destroy=function(){this.editor=null;this.history=[];this.index=-1};n.exports=r},function(n,t,i){"use strict";var u=i(5),f,r;t.parse=function(n){try{return JSON.parse(n)}catch(i){t.validate(n);throw i;}};t.sanitize=function(n){function r(){return n.charAt(t)}function f(){return n.charAt(t+1)}function o(){return n.charAt(t-1)}function s(){for(var t=i.length-1,n;t>=0;){if(n=i[t],n!==" "&&n!=="\n"&&n!=="\r"&&n!=="\t")return n;t--}return""}function h(){for(t+=2;t<n.length&&(r()!=="*"||f()!=="/");)t++;t+=2}function c(){for(t+=2;t<n.length&&r()!=="\n";)t++}function l(u){i.push('"');t++;for(var f=r();t<n.length&&f!==u;)f==='"'&&o()!=="\\"&&i.push("\\"),f==="\\"&&(t++,f=r(),f!=="'"&&i.push("\\")),i.push(f),t++,f=r();f===u&&(i.push('"'),t++)}function a(){for(var n="",u=r();/[a-zA-Z_$\d]/.test(u);)n+=u,t++,u=r();["null","true","false"].indexOf(n)===-1?i.push('"'+n+'"'):i.push(n)}var i=[],t=0,e=n.match(/^\s*(\/\*(.|[\r\n])*?\*\/)?\s*[\da-zA-Z_$]+\s*\(([\s\S]*)\)\s*;?\s*$/),u;for(e&&(n=e[3]);t<n.length;)u=r(),u==="/"&&f()==="*"?h():u==="/"&&f()==="/"?c():u==="'"||u==='"'?l(u):/[a-zA-Z_$]/.test(u)&&["{",","].indexOf(s())!==-1?a():(i.push(u),t++);return i.join("")};t.escapeUnicodeChars=function(n){return n.replace(/[\u007F-\uFFFF]/g,function(n){return"\\u"+("0000"+n.charCodeAt(0).toString(16)).slice(-4)})};t.validate=function(n){typeof u!="undefined"?u.parse(n):JSON.parse(n)};t.extend=function(n,t){for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i]);return n};t.clear=function(n){for(var t in n)n.hasOwnProperty(t)&&delete n[t];return n};t.type=function(n){return n===null?"null":n===undefined?"undefined":n instanceof Number||typeof n=="number"?"number":n instanceof String||typeof n=="string"?"string":n instanceof Boolean||typeof n=="boolean"?"boolean":n instanceof RegExp||typeof n=="regexp"?"regexp":t.isArray(n)?"array":"object"};f=/^https?:\/\/\S+$/;t.isUrl=function(n){return(typeof n=="string"||n instanceof String)&&f.test(n)};t.isArray=function(n){return Object.prototype.toString.call(n)==="[object Array]"};t.getAbsoluteLeft=function(n){var t=n.getBoundingClientRect();return t.left+window.pageXOffset||document.scrollLeft||0};t.getAbsoluteTop=function(n){var t=n.getBoundingClientRect();return t.top+window.pageYOffset||document.scrollTop||0};t.addClassName=function(n,t){var i=n.className.split(" ");i.indexOf(t)==-1&&(i.push(t),n.className=i.join(" "))};t.removeClassName=function(n,t){var i=n.className.split(" "),r=i.indexOf(t);r!=-1&&(i.splice(r,1),n.className=i.join(" "))};t.stripFormatting=function(n){for(var i,r,u,e,o=n.childNodes,f=0,s=o.length;f<s;f++){if(i=o[f],i.style&&i.removeAttribute("style"),r=i.attributes,r)for(u=r.length-1;u>=0;u--)e=r[u],e.specified===!0&&i.removeAttribute(e.name);t.stripFormatting(i)}};t.setEndOfContentEditable=function(n){var t,i;document.createRange&&(t=document.createRange(),t.selectNodeContents(n),t.collapse(!1),i=window.getSelection(),i.removeAllRanges(),i.addRange(t))};t.selectContentEditable=function(n){if(n&&n.nodeName=="DIV"){var t,i;window.getSelection&&document.createRange&&(i=document.createRange(),i.selectNodeContents(n),t=window.getSelection(),t.removeAllRanges(),t.addRange(i))}};t.getSelection=function(){if(window.getSelection){var n=window.getSelection();if(n.getRangeAt&&n.rangeCount)return n.getRangeAt(0)}return null};t.setSelection=function(n){if(n&&window.getSelection){var t=window.getSelection();t.removeAllRanges();t.addRange(n)}};t.getSelectionOffset=function(){var n=t.getSelection();return n&&"startOffset"in n&&"endOffset"in n&&n.startContainer&&n.startContainer==n.endContainer?{startOffset:n.startOffset,endOffset:n.endOffset,container:n.startContainer.parentNode}:null};t.setSelectionOffset=function(n){var r,i;document.createRange&&window.getSelection&&(r=window.getSelection(),r&&(i=document.createRange(),n.container.firstChild||n.container.appendChild(document.createTextNode("")),i.setStart(n.container.firstChild,n.startOffset),i.setEnd(n.container.firstChild,n.endOffset),t.setSelection(i)))};t.getInnerText=function(n,i){var c=i==undefined,o,r,f,h,u,s,e;if(c&&(i={text:"",flush:function(){var n=this.text;return this.text="",n},set:function(n){this.text=n}}),n.nodeValue)return i.flush()+n.nodeValue;if(n.hasChildNodes()){for(o=n.childNodes,r="",f=0,h=o.length;f<h;f++)u=o[f],u.nodeName=="DIV"||u.nodeName=="P"?(s=o[f-1],e=s?s.nodeName:undefined,e&&e!="DIV"&&e!="P"&&e!="BR"&&(r+="\n",i.flush()),r+=t.getInnerText(u,i),i.set("\n")):u.nodeName=="BR"?(r+=i.flush(),i.set("\n")):r+=t.getInnerText(u,i);return r}return n.nodeName=="P"&&t.getInternetExplorerVersion()!=-1?i.flush():""};t.getInternetExplorerVersion=function(){var n,t,i;return r==-1&&(n=-1,navigator.appName=="Microsoft Internet Explorer"&&(t=navigator.userAgent,i=new RegExp("MSIE ([0-9]{1,}[.0-9]{0,})"),i.exec(t)!=null&&(n=parseFloat(RegExp.$1))),r=n),r};t.isFirefox=function(){return navigator.userAgent.indexOf("Firefox")!=-1};r=-1;t.addEventListener=function(n,i,r,u){if(n.addEventListener)return u===undefined&&(u=!1),i==="mousewheel"&&t.isFirefox()&&(i="DOMMouseScroll"),n.addEventListener(i,r,u),r;if(n.attachEvent){var f=function(){return r.call(n,window.event)};return n.attachEvent("on"+i,f),f}};t.removeEventListener=function(n,i,r,u){n.removeEventListener?(u===undefined&&(u=!1),i==="mousewheel"&&t.isFirefox()&&(i="DOMMouseScroll"),n.removeEventListener(i,r,u)):n.detachEvent&&n.detachEvent("on"+i,r)};t.parsePath=function e(n){var r,u,f,i,t;if(n.length===0)return[];if(f=n.match(/^\.(\w+)/),f)r=f[1],u=n.substr(r.length+1);else if(n[0]==="["){if(i=n.indexOf("]"),i===-1)throw new SyntaxError("Character ] expected in path");if(i===1)throw new SyntaxError("Index expected after [");t=n.substring(1,i);t[0]==="'"&&(t='"'+t.substring(1,t.length-1)+'"');r=t==="*"?t:JSON.parse(t);u=n.substr(i+1)}else throw new SyntaxError("Failed to parse path");return[r].concat(e(u))};t.improveSchemaError=function(n){var t,i;return n.keyword==="enum"&&Array.isArray(n.schema)&&(t=n.schema,t&&(t=t.map(function(n){return JSON.stringify(n)}),t.length>5&&(i=["("+(t.length-5)+" more...)"],t=t.slice(0,5),t.push(i)),n.message="should be equal to one of: "+t.join(", "))),n.keyword==="additionalProperties"&&(n.message="should NOT have additional property: "+n.params.additionalProperty),n};t.insideRect=function(n,t,i){var r=i!==undefined?i:0;return t.left-r>=n.left&&t.right+r<=n.right&&t.top-r>=n.top&&t.bottom+r<=n.bottom};t.debounce=function(n,t,i){var r;return function(){var u=this,f=arguments,e=function(){r=null;i||n.apply(u,f)},o=i&&!r;clearTimeout(r);r=setTimeout(e,t);o&&n.apply(u,f)}};t.textDiff=function(n,t){for(var f=t.length,i=0,u=n.length,r=t.length;t.charAt(i)===n.charAt(i)&&i<f;)i++;while(t.charAt(r-1)===n.charAt(u-1)&&r>i&&u>0)r--,u--;return{start:i,end:r}}},function(n,t){var i=function(){var n={trace:function(){},yy:{},symbols_:{error:2,JSONString:3,STRING:4,JSONNumber:5,NUMBER:6,JSONNullLiteral:7,NULL:8,JSONBooleanLiteral:9,TRUE:10,FALSE:11,JSONText:12,JSONValue:13,EOF:14,JSONObject:15,JSONArray:16,"{":17,"}":18,JSONMemberList:19,JSONMember:20,":":21,",":22,"[":23,"]":24,JSONElementList:25,$accept:0,$end:1},terminals_:{2:"error",4:"STRING",6:"NUMBER",8:"NULL",10:"TRUE",11:"FALSE",14:"EOF",17:"{",18:"}",21:":",22:",",23:"[",24:"]"},productions_:[0,[3,1],[5,1],[7,1],[9,1],[9,1],[12,2],[13,1],[13,1],[13,1],[13,1],[13,1],[13,1],[15,2],[15,3],[20,3],[19,1],[19,3],[16,2],[16,3],[25,1],[25,3]],performAction:function(n,t,i,r,u,f){var e=f.length-1;switch(u){case 1:this.$=n.replace(/\\(\\|")/g,"$1").replace(/\\n/g,"\n").replace(/\\r/g,"\r").replace(/\\t/g,"\t").replace(/\\v/g,'\v').replace(/\\f/g,"\f").replace(/\\b/g,"\b");break;case 2:this.$=Number(n);break;case 3:this.$=null;break;case 4:this.$=!0;break;case 5:this.$=!1;break;case 6:return this.$=f[e-1];case 13:this.$={};break;case 14:this.$=f[e-1];break;case 15:this.$=[f[e-2],f[e]];break;case 16:this.$={};this.$[f[e][0]]=f[e][1];break;case 17:this.$=f[e-2];f[e-2][f[e][0]]=f[e][1];break;case 18:this.$=[];break;case 19:this.$=f[e-1];break;case 20:this.$=[f[e]];break;case 21:this.$=f[e-2];f[e-2].push(f[e])}},table:[{3:5,4:[1,12],5:6,6:[1,13],7:3,8:[1,9],9:4,10:[1,10],11:[1,11],12:1,13:2,15:7,16:8,17:[1,14],23:[1,15]},{1:[3]},{14:[1,16]},{14:[2,7],18:[2,7],22:[2,7],24:[2,7]},{14:[2,8],18:[2,8],22:[2,8],24:[2,8]},{14:[2,9],18:[2,9],22:[2,9],24:[2,9]},{14:[2,10],18:[2,10],22:[2,10],24:[2,10]},{14:[2,11],18:[2,11],22:[2,11],24:[2,11]},{14:[2,12],18:[2,12],22:[2,12],24:[2,12]},{14:[2,3],18:[2,3],22:[2,3],24:[2,3]},{14:[2,4],18:[2,4],22:[2,4],24:[2,4]},{14:[2,5],18:[2,5],22:[2,5],24:[2,5]},{14:[2,1],18:[2,1],21:[2,1],22:[2,1],24:[2,1]},{14:[2,2],18:[2,2],22:[2,2],24:[2,2]},{3:20,4:[1,12],18:[1,17],19:18,20:19},{3:5,4:[1,12],5:6,6:[1,13],7:3,8:[1,9],9:4,10:[1,10],11:[1,11],13:23,15:7,16:8,17:[1,14],23:[1,15],24:[1,21],25:22},{1:[2,6]},{14:[2,13],18:[2,13],22:[2,13],24:[2,13]},{18:[1,24],22:[1,25]},{18:[2,16],22:[2,16]},{21:[1,26]},{14:[2,18],18:[2,18],22:[2,18],24:[2,18]},{22:[1,28],24:[1,27]},{22:[2,20],24:[2,20]},{14:[2,14],18:[2,14],22:[2,14],24:[2,14]},{3:20,4:[1,12],20:29},{3:5,4:[1,12],5:6,6:[1,13],7:3,8:[1,9],9:4,10:[1,10],11:[1,11],13:30,15:7,16:8,17:[1,14],23:[1,15]},{14:[2,19],18:[2,19],22:[2,19],24:[2,19]},{3:5,4:[1,12],5:6,6:[1,13],7:3,8:[1,9],9:4,10:[1,10],11:[1,11],13:31,15:7,16:8,17:[1,14],23:[1,15]},{18:[2,17],22:[2,17]},{18:[2,15],22:[2,15]},{22:[2,21],24:[2,21]}],defaultActions:{16:[2,6]},parseError:function(n){throw new Error(n);},parse:function(n){function rt(n){t.length=t.length-2*n;e.length=e.length-n;r.length=r.length-n}function tt(){var n;return n=nt.lexer.lex()||1,typeof n!="number"&&(n=nt.symbols_[n]||n),n}var nt=this,t=[0],e=[null],r=[],s=this.table,b="",c=0,k=0,l=0,d=2,a,i,y,u,f,g,h,p,o,it,w,v;for(this.lexer.setInput(n),this.lexer.yy=this.yy,this.yy.lexer=this.lexer,typeof this.lexer.yylloc=="undefined"&&(this.lexer.yylloc={}),a=this.lexer.yylloc,r.push(a),typeof this.yy.parseError=="function"&&(this.parseError=this.yy.parseError),h={};;){if(u=t[t.length-1],this.defaultActions[u]?f=this.defaultActions[u]:(i==null&&(i=tt()),f=s[u]&&s[u][i]),typeof f=="undefined"||!f.length||!f[0]){if(!l){w=[];for(p in s[u])this.terminals_[p]&&p>2&&w.push("'"+this.terminals_[p]+"'");v="";v=this.lexer.showPosition?"Parse error on line "+(c+1)+":\n"+this.lexer.showPosition()+"\nExpecting "+w.join(", ")+", got '"+this.terminals_[i]+"'":"Parse error on line "+(c+1)+": Unexpected "+(i==1?"end of input":"'"+(this.terminals_[i]||i)+"'");this.parseError(v,{text:this.lexer.match,token:this.terminals_[i]||i,line:this.lexer.yylineno,loc:a,expected:w})}if(l==3){if(i==1)throw new Error(v||"Parsing halted.");k=this.lexer.yyleng;b=this.lexer.yytext;c=this.lexer.yylineno;a=this.lexer.yylloc;i=tt()}for(;;){if(d.toString()in s[u])break;if(u==0)throw new Error(v||"Parsing halted.");rt(1);u=t[t.length-1]}y=i;i=d;u=t[t.length-1];f=s[u]&&s[u][d];l=3}if(f[0]instanceof Array&&f.length>1)throw new Error("Parse Error: multiple actions possible at state: "+u+", token: "+i);switch(f[0]){case 1:t.push(i);e.push(this.lexer.yytext);r.push(this.lexer.yylloc);t.push(f[1]);i=null;y?(i=y,y=null):(k=this.lexer.yyleng,b=this.lexer.yytext,c=this.lexer.yylineno,a=this.lexer.yylloc,l>0&&l--);break;case 2:if(o=this.productions_[f[1]][1],h.$=e[e.length-o],h._$={first_line:r[r.length-(o||1)].first_line,last_line:r[r.length-1].last_line,first_column:r[r.length-(o||1)].first_column,last_column:r[r.length-1].last_column},g=this.performAction.call(h,b,k,c,this.yy,f[1],e,r),typeof g!="undefined")return g;o&&(t=t.slice(0,-2*o),e=e.slice(0,-1*o),r=r.slice(0,-1*o));t.push(this.productions_[f[1]][0]);e.push(h.$);r.push(h._$);it=s[t[t.length-2]][t[t.length-1]];t.push(it);break;case 3:return!0}}return!0}},t=function(){var n={EOF:1,parseError:function(n,t){if(this.yy.parseError)this.yy.parseError(n,t);else throw new Error(n);},setInput:function(n){return this._input=n,this._more=this._less=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this},input:function(){var n=this._input[0],t;return this.yytext+=n,this.yyleng++,this.match+=n,this.matched+=n,t=n.match(/\n/),t&&this.yylineno++,this._input=this._input.slice(1),n},unput:function(n){return this._input=n+this._input,this},more:function(){return this._more=!0,this},less:function(n){this._input=this.match.slice(n)+this._input},pastInput:function(){var n=this.matched.substr(0,this.matched.length-this.match.length);return(n.length>20?"...":"")+n.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var n=this.match;return n.length<20&&(n+=this._input.substr(0,20-n.length)),(n.substr(0,20)+(n.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var n=this.pastInput(),t=new Array(n.length+1).join("-");return n+this.upcomingInput()+"\n"+t+"^"},next:function(){var f,n,r,e,t,u,i;if(this.done)return this.EOF;for(this._input||(this.done=!0),this._more||(this.yytext="",this.match=""),u=this._currentRules(),i=0;i<u.length;i++)if(r=this._input.match(this.rules[u[i]]),r&&(!n||r[0].length>n[0].length)&&(n=r,e=i,!this.options.flex))break;if(n)return(t=n[0].match(/\n.*/g),t&&(this.yylineno+=t.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:t?t[t.length-1].length-1:this.yylloc.last_column+n[0].length},this.yytext+=n[0],this.match+=n[0],this.yyleng=this.yytext.length,this._more=!1,this._input=this._input.slice(n[0].length),this.matched+=n[0],f=this.performAction.call(this,this.yy,this,u[e],this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),f)?f:void 0;if(this._input==="")return this.EOF;this.parseError("Lexical error on line "+(this.yylineno+1)+". Unrecognized text.\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var n=this.next();return typeof n!="undefined"?n:this.lex()},begin:function(n){this.conditionStack.push(n)},popState:function(){return this.conditionStack.pop()},_currentRules:function(){return this.conditions[this.conditionStack[this.conditionStack.length-1]].rules},topState:function(){return this.conditionStack[this.conditionStack.length-2]},pushState:function(n){this.begin(n)}};return n.options={},n.performAction=function(n,t,i,r){var u=r;switch(i){case 1:return 6;case 2:return t.yytext=t.yytext.substr(1,t.yyleng-2),4;case 3:return 17;case 4:return 18;case 5:return 23;case 6:return 24;case 7:return 22;case 8:return 21;case 9:return 10;case 10:return 11;case 11:return 8;case 12:return 14;case 13:return"INVALID"}},n.rules=[/^(?:\s+)/,/^(?:(-?([0-9]|[1-9][0-9]+))(\.[0-9]+)?([eE][-+]?[0-9]+)?\b)/,/^(?:"(?:\\[\\"bfnrt/]|\\u[a-fA-F0-9]{4}|[^\\\0-\x09\x0a-\x1f"])*")/,/^(?:\{)/,/^(?:\})/,/^(?:\[)/,/^(?:\])/,/^(?:,)/,/^(?::)/,/^(?:true\b)/,/^(?:false\b)/,/^(?:null\b)/,/^(?:$)/,/^(?:.)/],n.conditions={INITIAL:{rules:[0,1,2,3,4,5,6,7,8,9,10,11,12,13],inclusive:!0}},n}();return n.lexer=t,n}();!0&&(t.parser=i,t.parse=i.parse.bind(i))},function(n){"use strict";function t(n,t){var f=this,h,l,r,i,a,e,v,y,c,u,o,s;this.editor=n;this.timeout=undefined;this.delay=200;this.lastText=undefined;this.dom={};this.dom.container=t;h=document.createElement("table");this.dom.table=h;h.className="jsoneditor-search";t.appendChild(h);l=document.createElement("tbody");this.dom.tbody=l;h.appendChild(l);r=document.createElement("tr");l.appendChild(r);i=document.createElement("td");r.appendChild(i);a=document.createElement("div");this.dom.results=a;a.className="jsoneditor-results";i.appendChild(a);i=document.createElement("td");r.appendChild(i);e=document.createElement("div");this.dom.input=e;e.className="jsoneditor-frame";e.title="Search fields and values";i.appendChild(e);v=document.createElement("table");e.appendChild(v);y=document.createElement("tbody");v.appendChild(y);r=document.createElement("tr");y.appendChild(r);c=document.createElement("button");c.type="button";c.className="jsoneditor-refresh";i=document.createElement("td");i.appendChild(c);r.appendChild(i);u=document.createElement("input");this.dom.search=u;u.oninput=function(n){f._onDelayedSearch(n)};u.onchange=function(){f._onSearch()};u.onkeydown=function(n){f._onKeyDown(n)};u.onkeyup=function(n){f._onKeyUp(n)};c.onclick=function(){u.select()};i=document.createElement("td");i.appendChild(u);r.appendChild(i);o=document.createElement("button");o.type="button";o.title="Next result (Enter)";o.className="jsoneditor-next";o.onclick=function(){f.next()};i=document.createElement("td");i.appendChild(o);r.appendChild(i);s=document.createElement("button");s.type="button";s.title="Previous result (Shift+Enter)";s.className="jsoneditor-previous";s.onclick=function(){f.previous()};i=document.createElement("td");i.appendChild(s);r.appendChild(i)}t.prototype.next=function(n){if(this.results!=undefined){var t=this.resultIndex!=undefined?this.resultIndex+1:0;t>this.results.length-1&&(t=0);this._setActiveResult(t,n)}};t.prototype.previous=function(n){if(this.results!=undefined){var i=this.results.length-1,t=this.resultIndex!=undefined?this.resultIndex-1:i;t<0&&(t=i);this._setActiveResult(t,n)}};t.prototype._setActiveResult=function(n,t){var r,f,i,u;if(this.activeResult&&(r=this.activeResult.node,f=this.activeResult.elem,f=="field"?delete r.searchFieldActive:delete r.searchValueActive,r.updateDom()),!this.results||!this.results[n]){this.resultIndex=undefined;this.activeResult=undefined;return}this.resultIndex=n;i=this.results[this.resultIndex].node;u=this.results[this.resultIndex].elem;u=="field"?i.searchFieldActive=!0:i.searchValueActive=!0;this.activeResult=this.results[this.resultIndex];i.updateDom();i.scrollTo(function(){t&&i.focus(u)})};t.prototype._clearDelay=function(){this.timeout!=undefined&&(clearTimeout(this.timeout),delete this.timeout)};t.prototype._onDelayedSearch=function(){this._clearDelay();var n=this;this.timeout=setTimeout(function(){n._onSearch()},this.delay)};t.prototype._onSearch=function(n){var i,t,r;if(this._clearDelay(),i=this.dom.search.value,t=i.length>0?i:undefined,t!=this.lastText||n)if(this.lastText=t,this.results=this.editor.search(t),this._setActiveResult(undefined),t!=undefined){r=this.results.length;switch(r){case 0:this.dom.results.innerHTML="no&nbsp;results";break;case 1:this.dom.results.innerHTML="1&nbsp;result";break;default:this.dom.results.innerHTML=r+"&nbsp;results"}}else this.dom.results.innerHTML=""};t.prototype._onKeyDown=function(n){var t=n.which;t==27?(this.dom.search.value="",this._onSearch(),n.preventDefault(),n.stopPropagation()):t==13&&(n.ctrlKey?this._onSearch(!0):n.shiftKey?this.previous():this.next(),n.preventDefault(),n.stopPropagation())};t.prototype._onKeyUp=function(n){var t=n.keyCode;t!=27&&t!=13&&this._onDelayedSearch(n)};t.prototype.clear=function(){this.dom.search.value="";this._onSearch()};t.prototype.destroy=function(){this.editor=null;this.dom.container.removeChild(this.dom.table);this.dom=null;this.results=null;this.activeResult=null;this._clearDelay()};n.exports=t},function(n,t,i){"use strict";function r(n,t){function h(n,t,i){i.forEach(function(i){var l,o,f,r,a,c,e,v,y,s;i.type=="separator"?(l=document.createElement("div"),l.className="jsoneditor-separator",f=document.createElement("li"),f.appendChild(l),n.appendChild(f)):(o={},f=document.createElement("li"),n.appendChild(f),r=document.createElement("button"),r.type="button",r.className=i.className,o.button=r,i.title&&(r.title=i.title),i.click&&(r.onclick=function(n){n.preventDefault();u.hide();i.click()}),f.appendChild(r),i.submenu?(a=document.createElement("div"),a.className="jsoneditor-icon",r.appendChild(a),r.appendChild(document.createTextNode(i.text)),i.click?(r.className+=" jsoneditor-default",e=document.createElement("button"),e.type="button",o.buttonExpand=e,e.className="jsoneditor-expand",e.innerHTML='<div class="jsoneditor-expand"><\/div>',f.appendChild(e),i.submenuTitle&&(e.title=i.submenuTitle),c=e):(v=document.createElement("div"),v.className="jsoneditor-expand",r.appendChild(v),c=r),c.onclick=function(n){n.preventDefault();u._onExpandItem(o);c.focus()},y=[],o.subItems=y,s=document.createElement("ul"),o.ul=s,s.className="jsoneditor-menu",s.style.height="0",f.appendChild(s),h(s,y,i.submenu)):r.innerHTML='<div class="jsoneditor-icon"><\/div>'+i.text,t.push(o))})}var u,i,o,f,r,s,e;this.dom={};u=this;i=this.dom;this.anchor=undefined;this.items=n;this.eventListeners={};this.selection=undefined;this.onClose=t?t.close:undefined;o=document.createElement("div");o.className="jsoneditor-contextmenu-root";i.root=o;f=document.createElement("div");f.className="jsoneditor-contextmenu";i.menu=f;o.appendChild(f);r=document.createElement("ul");r.className="jsoneditor-menu";f.appendChild(r);i.list=r;i.items=[];s=document.createElement("button");s.type="button";i.focusButton=s;e=document.createElement("li");e.style.overflow="hidden";e.style.height="0";e.appendChild(s);r.appendChild(e);h(r,this.dom.items,n);this.maxHeight=0;n.forEach(function(t){var i=(n.length+(t.submenu?t.submenu.length:0))*24;u.maxHeight=Math.max(u.maxHeight,i)})}var u=i(4);r.prototype._getVisibleButtons=function(){var n=[],t=this;return this.dom.items.forEach(function(i){n.push(i.button);i.buttonExpand&&n.push(i.buttonExpand);i.subItems&&i==t.expandedItem&&i.subItems.forEach(function(t){n.push(t.button);t.buttonExpand&&n.push(t.buttonExpand)})}),n};r.visibleMenu=undefined;r.prototype.show=function(n,t){var f,e,o,c,s,i,h;this.hide();f=!0;t&&(e=n.getBoundingClientRect(),o=t.getBoundingClientRect(),e.bottom+this.maxHeight<o.bottom||e.top-this.maxHeight>o.top&&(f=!1));f?(c=n.offsetHeight,this.dom.menu.style.left="0px",this.dom.menu.style.top=c+"px",this.dom.menu.style.bottom=""):(this.dom.menu.style.left="0px",this.dom.menu.style.top="",this.dom.menu.style.bottom="0px");s=n.parentNode;s.insertBefore(this.dom.root,s.firstChild);i=this;h=this.dom.list;this.eventListeners.mousedown=u.addEventListener(window,"mousedown",function(n){var t=n.target;t==h||i._isChildOf(t,h)||(i.hide(),n.stopPropagation(),n.preventDefault())});this.eventListeners.keydown=u.addEventListener(window,"keydown",function(n){i._onKeyDown(n)});this.selection=u.getSelection();this.anchor=n;setTimeout(function(){i.dom.focusButton.focus()},0);r.visibleMenu&&r.visibleMenu.hide();r.visibleMenu=this};r.prototype.hide=function(){var n,t;this.dom.root.parentNode&&(this.dom.root.parentNode.removeChild(this.dom.root),this.onClose&&this.onClose());for(n in this.eventListeners)this.eventListeners.hasOwnProperty(n)&&(t=this.eventListeners[n],t&&u.removeEventListener(window,n,t),delete this.eventListeners[n]);r.visibleMenu==this&&(r.visibleMenu=undefined)};r.prototype._onExpandItem=function(n){var r=this,f=n==this.expandedItem,i=this.expandedItem,t,e;i&&(i.ul.style.height="0",i.ul.style.padding="",setTimeout(function(){r.expandedItem!=i&&(i.ul.style.display="",u.removeClassName(i.ul.parentNode,"jsoneditor-selected"))},300),this.expandedItem=undefined);f||(t=n.ul,t.style.display="block",e=t.clientHeight,setTimeout(function(){r.expandedItem==n&&(t.style.height=t.childNodes.length*24+"px",t.style.padding="5px 10px")},0),u.addClassName(t.parentNode,"jsoneditor-selected"),this.expandedItem=n)};r.prototype._onKeyDown=function(n){var o=n.target,s=n.which,e=!1,t,i,f,r;s==27?(this.selection&&u.setSelection(this.selection),this.anchor&&this.anchor.focus(),this.hide(),e=!0):s==9?n.shiftKey?(t=this._getVisibleButtons(),i=t.indexOf(o),i==0&&(t[t.length-1].focus(),e=!0)):(t=this._getVisibleButtons(),i=t.indexOf(o),i==t.length-1&&(t[0].focus(),e=!0)):s==37?(o.className=="jsoneditor-expand"&&(t=this._getVisibleButtons(),i=t.indexOf(o),f=t[i-1],f&&f.focus()),e=!0):s==38?(t=this._getVisibleButtons(),i=t.indexOf(o),f=t[i-1],f&&f.className=="jsoneditor-expand"&&(f=t[i-2]),f||(f=t[t.length-1]),f&&f.focus(),e=!0):s==39?(t=this._getVisibleButtons(),i=t.indexOf(o),r=t[i+1],r&&r.className=="jsoneditor-expand"&&r.focus(),e=!0):s==40&&(t=this._getVisibleButtons(),i=t.indexOf(o),r=t[i+1],r&&r.className=="jsoneditor-expand"&&(r=t[i+2]),r||(r=t[0]),r&&(r.focus(),e=!0),e=!0);e&&(n.stopPropagation(),n.preventDefault())};r.prototype._isChildOf=function(n,t){for(var i=n.parentNode;i;){if(i==t)return!0;i=i.parentNode}return!1};n.exports=r},function(n,t,i){"use strict";function r(n,t){this.editor=n;this.dom={};this.expanded=!1;t&&t instanceof Object?(this.setField(t.field,t.fieldEditable),this.setValue(t.value,t.type)):(this.setField(""),this.setValue(null));this._debouncedOnChangeValue=u.debounce(this._onChangeValue.bind(this),r.prototype.DEBOUNCE_INTERVAL);this._debouncedOnChangeField=u.debounce(this._onChangeField.bind(this),r.prototype.DEBOUNCE_INTERVAL)}var e=i(9),o=i(7),s=i(10),u=i(4),f;r.prototype.DEBOUNCE_INTERVAL=150;r.prototype._updateEditability=function(){if(this.editable={field:!0,value:!0},this.editor&&(this.editable.field=this.editor.options.mode==="tree",this.editable.value=this.editor.options.mode!=="view",(this.editor.options.mode==="tree"||this.editor.options.mode==="form")&&typeof this.editor.options.onEditable=="function")){var n=this.editor.options.onEditable({field:this.field,value:this.value,path:this.getPath()});typeof n=="boolean"?(this.editable.field=n,this.editable.value=n):(typeof n.field=="boolean"&&(this.editable.field=n.field),typeof n.value=="boolean"&&(this.editable.value=n.value))}};r.prototype.getPath=function(){for(var n=this,i=[],t;n;)t=n.parent?n.parent.type!="array"?n.field:n.index:undefined,t!==undefined&&i.unshift(t),n=n.parent;return i};r.prototype.findNode=function(n){for(var r=u.parsePath(n),t=this,i;t&&r.length>0;)if(i=r.shift(),typeof i=="number"){if(t.type!=="array")throw new Error("Cannot get child node at index "+i+": node is no array");t=t.childs[i]}else{if(t.type!=="object")throw new Error("Cannot get child node "+i+": node is no object");t=t.childs.filter(function(n){return n.field===i})[0]}return t};r.prototype.findParents=function(){for(var t=[],n=this.parent;n;)t.unshift(n),n=n.parent;return t};r.prototype.setError=function(n,t){var i,f,r;if(this.getDom(),this.error=n,i=this.dom.tdError,n){for(i||(i=document.createElement("td"),this.dom.tdError=i,this.dom.tdValue.parentNode.appendChild(i)),f=document.createElement("div"),f.className="jsoneditor-popover jsoneditor-right",f.appendChild(document.createTextNode(n.message)),r=document.createElement("button"),r.type="button",r.className="jsoneditor-schema-error",r.appendChild(f),r.onmouseover=r.onfocus=function(){for(var i,t=["right","above","below","left"],n=0;n<t.length;n++){i=t[n];f.className="jsoneditor-popover jsoneditor-"+i;var r=this.editor.content.getBoundingClientRect(),e=f.getBoundingClientRect(),o=u.insideRect(r,e,20);if(o)break}}.bind(this),t&&(r.onclick=function(){t.findParents().forEach(function(n){n.expand(!1)});t.scrollTo(function(){t.focus()})});i.firstChild;)i.removeChild(i.firstChild);i.appendChild(r)}else i&&(this.dom.tdError.parentNode.removeChild(this.dom.tdError),delete this.dom.tdError)};r.prototype.getIndex=function(){return this.parent?this.parent.childs.indexOf(this):-1};r.prototype.setParent=function(n){this.parent=n};r.prototype.setField=function(n,t){this.field=n;this.previousField=n;this.fieldEditable=t===!0};r.prototype.getField=function(){return this.field===undefined&&this._getDomField(),this.field};r.prototype.setValue=function(n,t){var i,u,o=this.childs,f,s,e;if(o)while(o.length)this.removeChild(o[0]);if(this.type=this._getType(n),t&&t!=this.type)if(t=="string"&&this.type=="auto")this.type=t;else throw new Error('Type mismatch: cannot cast value of type "'+this.type+' to the specified type "'+t+'"');if(this.type=="array"){for(this.childs=[],f=0,s=n.length;f<s;f++)i=n[f],i===undefined||i instanceof Function||(u=new r(this.editor,{value:i}),this.appendChild(u));this.value=""}else if(this.type=="object"){this.childs=[];for(e in n)n.hasOwnProperty(e)&&(i=n[e],i===undefined||i instanceof Function||(u=new r(this.editor,{field:e,value:i}),this.appendChild(u)));this.value="";this.editor.options.sortObjectKeys===!0&&this.sort("asc")}else this.childs=undefined,this.value=n;this.previousValue=this.value};r.prototype.getValue=function(){var n,t;return this.type=="array"?(n=[],this.childs.forEach(function(t){n.push(t.getValue())}),n):this.type=="object"?(t={},this.childs.forEach(function(n){t[n.getField()]=n.getValue()}),t):(this.value===undefined&&this._getDomValue(),this.value)};r.prototype.getLevel=function(){return this.parent?this.parent.getLevel()+1:0};r.prototype.getNodePath=function(){var n=this.parent?this.parent.getNodePath():[];return n.push(this),n};r.prototype.clone=function(){var n=new r(this.editor),t;return n.type=this.type,n.field=this.field,n.fieldInnerText=this.fieldInnerText,n.fieldEditable=this.fieldEditable,n.value=this.value,n.valueInnerText=this.valueInnerText,n.expanded=this.expanded,this.childs?(t=[],this.childs.forEach(function(i){var r=i.clone();r.setParent(n);t.push(r)}),n.childs=t):n.childs=undefined,n};r.prototype.expand=function(n){this.childs&&(this.expanded=!0,this.dom.expand&&(this.dom.expand.className="jsoneditor-expanded"),this.showChilds(),n!==!1&&this.childs.forEach(function(t){t.expand(n)}))};r.prototype.collapse=function(n){this.childs&&(this.hideChilds(),n!==!1&&this.childs.forEach(function(t){t.collapse(n)}),this.dom.expand&&(this.dom.expand.className="jsoneditor-collapsed"),this.expanded=!1)};r.prototype.showChilds=function(){var u=this.childs,t,n,i,r;u&&this.expanded&&(t=this.dom.tr,n=t?t.parentNode:undefined,n&&(i=this.getAppend(),r=t.nextSibling,r?n.insertBefore(i,r):n.appendChild(i),this.childs.forEach(function(t){n.insertBefore(t.getDom(),i);t.showChilds()})))};r.prototype.hide=function(){var n=this.dom.tr,t=n?n.parentNode:undefined;t&&t.removeChild(n);this.hideChilds()};r.prototype.hideChilds=function(){var t=this.childs,n;t&&this.expanded&&(n=this.getAppend(),n.parentNode&&n.parentNode.removeChild(n),this.childs.forEach(function(n){n.hide()}))};r.prototype.appendChild=function(n){if(this._hasChilds()){if(n.setParent(this),n.fieldEditable=this.type=="object",this.type=="array"&&(n.index=this.childs.length),this.childs.push(n),this.expanded){var r=n.getDom(),t=this.getAppend(),i=t?t.parentNode:undefined;t&&i&&i.insertBefore(r,t);n.showChilds()}this.updateDom({updateIndexes:!0});n.updateDom({recurse:!0})}};r.prototype.moveBefore=function(n,t){var i,r;this._hasChilds()&&(i=this.dom.tr?this.dom.tr.parentNode:undefined,i&&(r=document.createElement("tr"),r.style.height=i.clientHeight+"px",i.appendChild(r)),n.parent&&n.parent.removeChild(n),t instanceof f?this.appendChild(n):this.insertBefore(n,t),i&&i.removeChild(r))};r.prototype.moveTo=function(n,t){var i,r;n.parent==this&&(i=this.childs.indexOf(n),i<t&&t++);r=this.childs[t]||this.append;this.moveBefore(n,r)};r.prototype.insertBefore=function(n,t){var r;if(this._hasChilds()){if(t==this.append)n.setParent(this),n.fieldEditable=this.type=="object",this.childs.push(n);else{if(r=this.childs.indexOf(t),r==-1)throw new Error("Node not found");n.setParent(this);n.fieldEditable=this.type=="object";this.childs.splice(r,0,n)}if(this.expanded){var f=n.getDom(),i=t.getDom(),u=i?i.parentNode:undefined;i&&u&&u.insertBefore(f,i);n.showChilds()}this.updateDom({updateIndexes:!0});n.updateDom({recurse:!0})}};r.prototype.insertAfter=function(n,t){if(this._hasChilds()){var r=this.childs.indexOf(t),i=this.childs[r+1];i?this.insertBefore(n,i):this.appendChild(n)}};r.prototype.search=function(n){var t=[],r,u=n?n.toLowerCase():undefined,e,i,f,o;return delete this.searchField,delete this.searchValue,this.field!=undefined&&(e=String(this.field).toLowerCase(),r=e.indexOf(u),r!=-1&&(this.searchField=!0,t.push({node:this,elem:"field"})),this._updateDomField()),this._hasChilds()?(this.childs&&(i=[],this.childs.forEach(function(t){i=i.concat(t.search(n))}),t=t.concat(i)),u!=undefined&&(f=!1,i.length==0?this.collapse(f):this.expand(f))):(this.value!=undefined&&(o=String(this.value).toLowerCase(),r=o.indexOf(u),r!=-1&&(this.searchValue=!0,t.push({node:this,elem:"value"}))),this._updateDomValue()),t};r.prototype.scrollTo=function(n){if(!this.dom.tr||!this.dom.tr.parentNode)for(var t=this.parent;t;)t.expand(!1),t=t.parent;this.dom.tr&&this.dom.tr.parentNode&&this.editor.scrollTo(this.dom.tr.offsetTop,n)};r.focusElement=undefined;r.prototype.focus=function(n){if(r.focusElement=n,this.dom.tr&&this.dom.tr.parentNode){var t=this.dom;switch(n){case"drag":t.drag?t.drag.focus():t.menu.focus();break;case"menu":t.menu.focus();break;case"expand":this._hasChilds()?t.expand.focus():t.field&&this.fieldEditable?(t.field.focus(),u.selectContentEditable(t.field)):t.value&&!this._hasChilds()?(t.value.focus(),u.selectContentEditable(t.value)):t.menu.focus();break;case"field":t.field&&this.fieldEditable?(t.field.focus(),u.selectContentEditable(t.field)):t.value&&!this._hasChilds()?(t.value.focus(),u.selectContentEditable(t.value)):this._hasChilds()?t.expand.focus():t.menu.focus();break;case"value":default:t.value&&!this._hasChilds()?(t.value.focus(),u.selectContentEditable(t.value)):t.field&&this.fieldEditable?(t.field.focus(),u.selectContentEditable(t.field)):this._hasChilds()?t.expand.focus():t.menu.focus()}}};r.select=function(n){setTimeout(function(){u.selectContentEditable(n)},0)};r.prototype.blur=function(){this._getDomValue(!1);this._getDomField(!1)};r.prototype.containsNode=function(n){var t,i,r;if(this==n)return!0;if(t=this.childs,t)for(i=0,r=t.length;i<r;i++)if(t[i].containsNode(n))return!0;return!1};r.prototype._move=function(n,t){if(n!=t){if(n.containsNode(this))throw new Error("Cannot move a field into a child of itself");n.parent&&n.parent.removeChild(n);var i=n.clone();n.clearDom();t?this.insertBefore(i,t):this.appendChild(i)}};r.prototype.removeChild=function(n){var t,i;return this.childs&&(t=this.childs.indexOf(n),t!=-1)?(n.hide(),delete n.searchField,delete n.searchValue,i=this.childs.splice(t,1)[0],i.parent=null,this.updateDom({updateIndexes:!0}),i):undefined};r.prototype._remove=function(n){this.removeChild(n)};r.prototype.changeType=function(n){var t=this.type,i,r,u;t!=n&&((n=="string"||n=="auto")&&(t=="string"||t=="auto")?this.type=n:(i=this.dom.tr?this.dom.tr.parentNode:undefined,r=this.expanded?this.getAppend():this.getDom(),u=r&&r.parentNode?r.nextSibling:undefined,this.hide(),this.clearDom(),this.type=n,n=="object"?(this.childs||(this.childs=[]),this.childs.forEach(function(n){n.clearDom();delete n.index;n.fieldEditable=!0;n.field==undefined&&(n.field="")}),(t=="string"||t=="auto")&&(this.expanded=!0)):n=="array"?(this.childs||(this.childs=[]),this.childs.forEach(function(n,t){n.clearDom();n.fieldEditable=!1;n.index=t}),(t=="string"||t=="auto")&&(this.expanded=!0)):this.expanded=!1,i&&(u?i.insertBefore(this.getDom(),u):i.appendChild(this.getDom())),this.showChilds()),(n=="auto"||n=="string")&&(this.value=n=="string"?String(this.value):this._stringCast(String(this.value)),this.focus()),this.updateDom({updateIndexes:!0}))};r.prototype._getDomValue=function(n){var t,i;if(this.dom.value&&this.type!="array"&&this.type!="object"&&(this.valueInnerText=u.getInnerText(this.dom.value)),this.valueInnerText!=undefined)try{this.type=="string"?t=this._unescapeHTML(this.valueInnerText):(i=this._unescapeHTML(this.valueInnerText),t=this._stringCast(i));t!==this.value&&(this.value=t,this._debouncedOnChangeValue())}catch(r){if(this.value=undefined,n!==!0)throw r;}};r.prototype._onChangeValue=function(){var t=this.editor.getSelection(),i,n,r;t.range&&(i=u.textDiff(String(this.value),String(this.previousValue)),t.range.startOffset=i.start,t.range.endOffset=i.end);n=this.editor.getSelection();n.range&&(r=u.textDiff(String(this.previousValue),String(this.value)),n.range.startOffset=r.start,n.range.endOffset=r.end);this.editor._onAction("editValue",{node:this,oldValue:this.previousValue,newValue:this.value,oldSelection:t,newSelection:n});this.previousValue=this.value};r.prototype._onChangeField=function(){var t=this.editor.getSelection(),i,n,r;t.range&&(i=u.textDiff(this.field,this.previousField),t.range.startOffset=i.start,t.range.endOffset=i.end);n=this.editor.getSelection();n.range&&(r=u.textDiff(this.previousField,this.field),n.range.startOffset=r.start,n.range.endOffset=r.end);this.editor._onAction("editField",{node:this,oldValue:this.previousField,newValue:this.field,oldSelection:t,newSelection:n});this.previousField=this.field};r.prototype._updateDomValue=function(){var t=this.dom.value,o,s,r;if(t){var n=["jsoneditor-value"],f=this.value,i=this.type=="auto"?u.type(f):this.type,e=i=="string"&&u.isUrl(f);if(n.push("jsoneditor-"+i),e&&n.push("jsoneditor-url"),o=String(this.value)==""&&this.type!="array"&&this.type!="object",o&&n.push("jsoneditor-empty"),this.searchValueActive&&n.push("jsoneditor-highlight-active"),this.searchValue&&n.push("jsoneditor-highlight"),t.className=n.join(" "),i=="array"||i=="object"?(s=this.childs?this.childs.length:0,t.title=this.type+" containing "+s+" items"):t.title=e&&this.editable.value?"Ctrl+Click or Ctrl+Enter to open url in new window":"",i==="boolean"&&this.editable.value?(this.dom.checkbox||(this.dom.checkbox=document.createElement("input"),this.dom.checkbox.type="checkbox",this.dom.tdCheckbox=document.createElement("td"),this.dom.tdCheckbox.className="jsoneditor-tree",this.dom.tdCheckbox.appendChild(this.dom.checkbox),this.dom.tdValue.parentNode.insertBefore(this.dom.tdCheckbox,this.dom.tdValue)),this.dom.checkbox.checked=this.value):this.dom.tdCheckbox&&(this.dom.tdCheckbox.parentNode.removeChild(this.dom.tdCheckbox),delete this.dom.tdCheckbox,delete this.dom.checkbox),this.enum&&this.editable.value){if(!this.dom.select){for(this.dom.select=document.createElement("select"),this.id=this.field+"_"+(new Date).getUTCMilliseconds(),this.dom.select.id=this.id,this.dom.select.name=this.dom.select.id,this.dom.select.option=document.createElement("option"),this.dom.select.option.value="",this.dom.select.option.innerHTML="--",this.dom.select.appendChild(this.dom.select.option),r=0;r<this.enum.length;r++)this.dom.select.option=document.createElement("option"),this.dom.select.option.value=this.enum[r],this.dom.select.option.innerHTML=this.enum[r],this.dom.select.option.value==this.value&&(this.dom.select.option.selected=!0),this.dom.select.appendChild(this.dom.select.option);this.dom.tdSelect=document.createElement("td");this.dom.tdSelect.className="jsoneditor-tree";this.dom.tdSelect.appendChild(this.dom.select);this.dom.tdValue.parentNode.insertBefore(this.dom.tdSelect,this.dom.tdValue)}!this.schema||this.schema.hasOwnProperty("oneOf")||this.schema.hasOwnProperty("anyOf")||this.schema.hasOwnProperty("allOf")?delete this.valueFieldHTML:(this.valueFieldHTML=this.dom.tdValue.innerHTML,this.dom.tdValue.style.visibility="hidden",this.dom.tdValue.innerHTML="")}else this.dom.tdSelect&&(this.dom.tdSelect.parentNode.removeChild(this.dom.tdSelect),delete this.dom.tdSelect,delete this.dom.select,this.dom.tdValue.innerHTML=this.valueFieldHTML,this.dom.tdValue.style.visibility="",delete this.valueFieldHTML);u.stripFormatting(t)}};r.prototype._updateDomField=function(){var n=this.dom.field,t;n&&(t=String(this.field)==""&&this.parent.type!="array",t?u.addClassName(n,"jsoneditor-empty"):u.removeClassName(n,"jsoneditor-empty"),this.searchFieldActive?u.addClassName(n,"jsoneditor-highlight-active"):u.removeClassName(n,"jsoneditor-highlight-active"),this.searchField?u.addClassName(n,"jsoneditor-highlight"):u.removeClassName(n,"jsoneditor-highlight"),u.stripFormatting(n))};r.prototype._getDomField=function(n){if(this.dom.field&&this.fieldEditable&&(this.fieldInnerText=u.getInnerText(this.dom.field)),this.fieldInnerText!=undefined)try{var t=this._unescapeHTML(this.fieldInnerText);t!==this.field&&(this.field=t,this._debouncedOnChangeField())}catch(i){if(this.field=undefined,n!==!0)throw i;}};r.prototype.validate=function(){var t=[],u,i,r,n,f;if(this.type==="object"){for(u={},i=[],n=0;n<this.childs.length;n++)r=this.childs[n],u.hasOwnProperty(r.field)&&i.push(r.field),u[r.field]=!0;i.length>0&&(t=this.childs.filter(function(n){return i.indexOf(n.field)!==-1}).map(function(n){return{node:n,error:{message:'duplicate key "'+n.field+'"'}}}))}if(this.childs)for(n=0;n<this.childs.length;n++)f=this.childs[n].validate(),f.length>0&&(t=t.concat(f));return t};r.prototype.clearDom=function(){this.dom={}};r.prototype.getDom=function(){var n=this.dom,r,t,u,i,f;return n.tr?n.tr:(this._updateEditability(),n.tr=document.createElement("tr"),n.tr.node=this,this.editor.options.mode==="tree"&&(r=document.createElement("td"),this.editable.field&&this.parent&&(t=document.createElement("button"),t.type="button",n.drag=t,t.className="jsoneditor-dragarea",t.title="Drag to move this field (Alt+Shift+Arrows)",r.appendChild(t)),n.tr.appendChild(r),u=document.createElement("td"),i=document.createElement("button"),i.type="button",n.menu=i,i.className="jsoneditor-contextmenu",i.title="Click to open the actions menu (Ctrl+M)",u.appendChild(n.menu),n.tr.appendChild(u)),f=document.createElement("td"),n.tr.appendChild(f),n.tree=this._createDomTree(),f.appendChild(n.tree),this.updateDom({updateIndexes:!0}),n.tr)};r.onDragStart=function(n,t){if(!Array.isArray(n))return r.onDragStart([n],t);if(n.length!==0){var f=n[0],e=n[n.length-1],o=r.getNodeFromTarget(t.target),s=e._nextSibling(),i=f.editor,h=u.getAbsoluteTop(o.dom.tr)-u.getAbsoluteTop(f.dom.tr);i.mousemove||(i.mousemove=u.addEventListener(window,"mousemove",function(t){r.onDrag(n,t)}));i.mouseup||(i.mouseup=u.addEventListener(window,"mouseup",function(t){r.onDragEnd(n,t)}));i.highlighter.lock();i.drag={oldCursor:document.body.style.cursor,oldSelection:i.getSelection(),oldBeforeNode:s,mouseX:t.pageX,offsetY:h,level:f.getLevel()};document.body.style.cursor="move";t.preventDefault()}};r.onDrag=function(n,t){var h,et,g;if(!Array.isArray(n))return r.onDrag([n],t);if(n.length!==0){var c=n[0].editor,l=t.pageY-c.drag.offsetY,nt=t.pageX,a,e,s,v,y,b,i,o,p,w,tt,it,rt,ut,k=!1,d=n[0];if(a=d.dom.tr,p=u.getAbsoluteTop(a),it=a.offsetHeight,l<p){e=a;do e=e.previousSibling,i=r.getNodeFromTarget(e),w=e?u.getAbsoluteTop(e):0;while(e&&l<w);i&&!i.parent&&(i=undefined);i||(b=a.parentNode.firstChild,e=b?b.nextSibling:undefined,i=r.getNodeFromTarget(e),i==d&&(i=undefined));i&&(e=i.dom.tr,w=e?u.getAbsoluteTop(e):0,l>w+it&&(i=undefined));i&&(n.forEach(function(n){i.parent.moveBefore(n,i)}),k=!0)}else if(h=n[n.length-1],y=h.expanded&&h.append?h.append.getDom():h.dom.tr,v=y?y.nextSibling:undefined,v){tt=u.getAbsoluteTop(v);s=v;do o=r.getNodeFromTarget(s),s&&(rt=s.nextSibling?u.getAbsoluteTop(s.nextSibling):0,ut=s?rt-tt:0,o.parent.childs.length==n.length&&o.parent.childs[n.length-1]==h&&(p+=27)),s=s.nextSibling;while(s&&l>p+ut);if(o&&o.parent){var ot=nt-c.drag.mouseX,st=Math.round(ot/48),ht=c.drag.level+st,ft=o.getLevel();for(e=o.dom.tr.previousSibling;ft<ht&&e;){if(i=r.getNodeFromTarget(e),et=n.some(function(n){return n===i||i._isChildOf(n)}),!et)if(i instanceof f)if(g=i.parent.childs,g.length!=n.length||g[n.length-1]!=h)o=r.getNodeFromTarget(e),ft=o.getLevel();else break;else break;e=e.previousSibling}y.nextSibling!=o.dom.tr&&(n.forEach(function(n){o.parent.moveBefore(n,o)}),k=!0)}}k&&(c.drag.mouseX=nt,c.drag.level=d.getLevel());c.startAutoScroll(l);t.preventDefault()}};r.onDragEnd=function(n,t){var f;if(!Array.isArray(n))return r.onDrag([n],t);if(n.length!==0){var e=n[0],i=e.editor,o=e.parent,s=o.childs.indexOf(e),h=o.childs[s+n.length]||o.append;n[0]&&n[0].dom.menu.focus();f={nodes:n,oldSelection:i.drag.oldSelection,newSelection:i.getSelection(),oldBeforeNode:i.drag.oldBeforeNode,newBeforeNode:h};f.oldBeforeNode!=f.newBeforeNode&&i._onAction("moveNodes",f);document.body.style.cursor=i.drag.oldCursor;i.highlighter.unlock();n.forEach(function(n){t.target!==n.dom.drag&&t.target!==n.dom.menu&&i.highlighter.unhighlight()});delete i.drag;i.mousemove&&(u.removeEventListener(window,"mousemove",i.mousemove),delete i.mousemove);i.mouseup&&(u.removeEventListener(window,"mouseup",i.mouseup),delete i.mouseup);i.stopAutoScroll();t.preventDefault()}};r.prototype._isChildOf=function(n){for(var t=this.parent;t;){if(t==n)return!0;t=t.parent}return!1};r.prototype._createDomField=function(){return document.createElement("div")};r.prototype.setHighlight=function(n){this.dom.tr&&(n?u.addClassName(this.dom.tr,"jsoneditor-highlight"):u.removeClassName(this.dom.tr,"jsoneditor-highlight"),this.append&&this.append.setHighlight(n),this.childs&&this.childs.forEach(function(t){t.setHighlight(n)}))};r.prototype.setSelected=function(n,t){this.selected=n;this.dom.tr&&(n?u.addClassName(this.dom.tr,"jsoneditor-selected"):u.removeClassName(this.dom.tr,"jsoneditor-selected"),t?u.addClassName(this.dom.tr,"jsoneditor-first"):u.removeClassName(this.dom.tr,"jsoneditor-first"),this.append&&this.append.setSelected(n),this.childs&&this.childs.forEach(function(t){t.setSelected(n)}))};r.prototype.updateValue=function(n){this.value=n;this.updateDom()};r.prototype.updateField=function(n){this.field=n;this.updateDom()};r.prototype.updateDom=function(n){var f=this.dom.tree,t,e,i,r;f&&(f.style.marginLeft=this.getLevel()*24+"px");t=this.dom.field;t&&(this.fieldEditable?(t.contentEditable=this.editable.field,t.spellcheck=!1,t.className="jsoneditor-field"):t.className="jsoneditor-readonly",e=this.index!=undefined?this.index:this.field!=undefined?this.field:this._hasChilds()?this.type:"",t.innerHTML=this._escapeHTML(e),this._updateSchema());i=this.dom.value;i&&(r=this.childs?this.childs.length:0,this.type=="array"?(i.innerHTML="["+r+"]",u.addClassName(this.dom.tr,"jsoneditor-expandable")):this.type=="object"?(i.innerHTML="{"+r+"}",u.addClassName(this.dom.tr,"jsoneditor-expandable")):(i.innerHTML=this._escapeHTML(this.value),u.removeClassName(this.dom.tr,"jsoneditor-expandable")));this._updateDomField();this._updateDomValue();n&&n.updateIndexes===!0&&this._updateDomIndexes();n&&n.recurse===!0&&this.childs&&this.childs.forEach(function(t){t.updateDom(n)});this.append&&this.append.updateDom()};r.prototype._updateSchema=function(){this.editor&&this.editor.options&&(this.schema=r._findSchema(this.editor.options.schema,this.getPath()),this.schema?this.enum=r._findEnum(this.schema):delete this.enum)};r._findEnum=function(n){var t,i;return n.enum?n.enum:(t=n.oneOf||n.anyOf||n.allOf,t&&(i=t.filter(function(n){return n.enum}),i.length>0))?i[0].enum:null};r._findSchema=function(n,t){for(var r,i=n,u=0;u<t.length&&i;u++)r=t[u],typeof r=="string"&&i.properties?i=i.properties[r]||null:typeof r=="number"&&i.items&&(i=i.items);return i};r.prototype._updateDomIndexes=function(){var t=this.dom.value,n=this.childs;t&&n&&(this.type=="array"?n.forEach(function(n,t){n.index=t;var i=n.dom.field;i&&(i.innerHTML=t)}):this.type=="object"&&n.forEach(function(n){n.index!=undefined&&(delete n.index,n.field==undefined&&(n.field=""))}))};r.prototype._createDomValue=function(){var n;return this.type=="array"?(n=document.createElement("div"),n.innerHTML="[...]"):this.type=="object"?(n=document.createElement("div"),n.innerHTML="{...}"):!this.editable.value&&u.isUrl(this.value)?(n=document.createElement("a"),n.href=this.value,n.target="_blank",n.innerHTML=this._escapeHTML(this.value)):(n=document.createElement("div"),n.contentEditable=this.editable.value,n.spellcheck=!1,n.innerHTML=this._escapeHTML(this.value)),n};r.prototype._createDomExpandButton=function(){var n=document.createElement("button");return n.type="button",this._hasChilds()?(n.className=this.expanded?"jsoneditor-expanded":"jsoneditor-collapsed",n.title="Click to expand/collapse this field (Ctrl+E). \nCtrl+Click to expand/collapse including all childs."):(n.className="jsoneditor-invisible",n.title=""),n};r.prototype._createDomTree=function(){var n=this.dom,e=document.createElement("table"),o=document.createElement("tbody"),t,r,u,i,f;return e.style.borderCollapse="collapse",e.className="jsoneditor-values",e.appendChild(o),t=document.createElement("tr"),o.appendChild(t),r=document.createElement("td"),r.className="jsoneditor-tree",t.appendChild(r),n.expand=this._createDomExpandButton(),r.appendChild(n.expand),n.tdExpand=r,u=document.createElement("td"),u.className="jsoneditor-tree",t.appendChild(u),n.field=this._createDomField(),u.appendChild(n.field),n.tdField=u,i=document.createElement("td"),i.className="jsoneditor-tree",t.appendChild(i),this.type!="object"&&this.type!="array"&&(i.appendChild(document.createTextNode(":")),i.className="jsoneditor-separator"),n.tdSeparator=i,f=document.createElement("td"),f.className="jsoneditor-tree",t.appendChild(f),n.value=this._createDomValue(),f.appendChild(n.value),n.tdValue=f,e};r.prototype.onEvent=function(n){var r=n.type,i=n.target||n.srcElement,t=this.dom,e=this,h=this._hasChilds(),s,c,o,f,l,a;if((i==t.drag||i==t.menu)&&(r=="mouseover"?this.editor.highlighter.highlight(this):r=="mouseout"&&this.editor.highlighter.unhighlight()),r=="click"&&i==t.menu&&(s=e.editor.highlighter,s.highlight(e),s.lock(),u.addClassName(t.menu,"jsoneditor-selected"),this.showContextMenu(t.menu,function(){u.removeClassName(t.menu,"jsoneditor-selected");s.unlock();s.unhighlight()})),r=="click"&&(i==t.expand||(e.editor.options.mode==="view"||e.editor.options.mode==="form")&&i.nodeName==="DIV")&&h&&(c=n.ctrlKey,this._onExpand(c)),r=="change"&&i==t.checkbox&&(this.dom.value.innerHTML=!this.value,this._getDomValue()),r=="change"&&i==t.select&&(this.dom.value.innerHTML=t.select.value,this._getDomValue(),this._updateDomValue()),o=t.value,i==o)switch(r){case"blur":case"change":this._getDomValue(!0);this._updateDomValue();this.value&&(o.innerHTML=this._escapeHTML(this.value));break;case"input":this._getDomValue(!0);this._updateDomValue();break;case"keydown":case"mousedown":this.editor.selection=this.editor.getSelection();break;case"click":(n.ctrlKey||!this.editable.value)&&u.isUrl(this.value)&&window.open(this.value,"_blank");break;case"keyup":this._getDomValue(!0);this._updateDomValue();break;case"cut":case"paste":setTimeout(function(){e._getDomValue(!0);e._updateDomValue()},1)}if(f=t.field,i==f)switch(r){case"blur":case"change":this._getDomField(!0);this._updateDomField();this.field&&(f.innerHTML=this._escapeHTML(this.field));break;case"input":this._getDomField(!0);this._updateSchema();this._updateDomField();this._updateDomValue();break;case"keydown":case"mousedown":this.editor.selection=this.editor.getSelection();break;case"keyup":this._getDomField(!0);this._updateDomField();break;case"cut":case"paste":setTimeout(function(){e._getDomField(!0);e._updateDomField()},1)}if(l=t.tree,i!=l.parentNode||r!="click"||n.hasMoved||(a=n.offsetX!=undefined?n.offsetX<(this.getLevel()+1)*24:n.pageX<u.getAbsoluteLeft(t.tdSeparator),a||h?f&&(u.setEndOfContentEditable(f),f.focus()):o&&!this.enum&&(u.setEndOfContentEditable(o),o.focus())),(i!=t.tdExpand||h)&&i!=t.tdField&&i!=t.tdSeparator||r!="click"||n.hasMoved||f&&(u.setEndOfContentEditable(f),f.focus()),r=="keydown")this.onKeyDown(n)};r.prototype.onKeyDown=function(n){var c=n.which||n.keyCode,e=n.target||n.srcElement,w=n.ctrlKey,s=n.shiftKey,l=n.altKey,i=!1,t,o,d,ot,p=this.editor.options.mode==="tree",b,k,g,a,h=this.editor.multiselection.nodes.length>0?this.editor.multiselection.nodes:[this],st=h[0],v=h[h.length-1],ht,ct,tt,it,rt,ut,nt,ft,et,y;if(c==13)e==this.dom.value?(!this.editable.value||n.ctrlKey)&&u.isUrl(this.value)&&(window.open(this.value,"_blank"),i=!0):e==this.dom.expand&&(ht=this._hasChilds(),ht&&(ct=n.ctrlKey,this._onExpand(ct),e.focus(),i=!0));else if(c==68){if(w&&p){r.onDuplicate(h);i=!0}}else if(c==69)w&&(this._onExpand(s),e.focus(),i=!0);else if(c==77&&p)w&&(this.showContextMenu(e),i=!0);else if(c==46&&p){if(w){r.onRemove(h);i=!0}}else c==45&&p?w&&!s?(this._onInsertBefore(),i=!0):w&&s&&(this._onInsertAfter(),i=!0):c==35?l&&(tt=this._lastNode(),tt&&tt.focus(r.focusElement||this._getElementName(e)),i=!0):c==36?l&&(it=this._firstNode(),it&&it.focus(r.focusElement||this._getElementName(e)),i=!0):c==37?l&&!s?(rt=this._previousElement(e),rt&&this.focus(this._getElementName(rt)),i=!0):l&&s&&p&&(v.expanded?(ut=v.getAppend(),d=ut?ut.nextSibling:undefined):(nt=v.getDom(),d=nt.nextSibling),d&&(o=r.getNodeFromTarget(d),ot=d.nextSibling,y=r.getNodeFromTarget(ot),o&&o instanceof f&&!(v.parent.childs.length==1)&&y&&y.parent&&(b=this.editor.getSelection(),k=v._nextSibling(),h.forEach(function(n){y.parent.moveBefore(n,y)}),this.focus(r.focusElement||this._getElementName(e)),this.editor._onAction("moveNodes",{nodes:h,oldBeforeNode:k,newBeforeNode:y,oldSelection:b,newSelection:this.editor.getSelection()})))):c==38?l&&!s?(t=this._previousNode(),t&&(this.editor.deselect(!0),t.focus(r.focusElement||this._getElementName(e))),i=!0):!l&&w&&s&&p?(t=this._previousNode(),t&&(a=this.editor.multiselection,a.start=a.start||this,a.end=t,g=this.editor._findTopLevelNodes(a.start,a.end),this.editor.select(g),t.focus("field")),i=!0):l&&s&&p&&(t=st._previousNode(),t&&t.parent&&(b=this.editor.getSelection(),k=v._nextSibling(),h.forEach(function(n){t.parent.moveBefore(n,t)}),this.focus(r.focusElement||this._getElementName(e)),this.editor._onAction("moveNodes",{nodes:h,oldBeforeNode:k,newBeforeNode:t,oldSelection:b,newSelection:this.editor.getSelection()})),i=!0):c==39?l&&!s?(ft=this._nextElement(e),ft&&this.focus(this._getElementName(ft)),i=!0):l&&s&&p&&(nt=st.getDom(),et=nt.previousSibling,et&&(t=r.getNodeFromTarget(et),t&&t.parent&&t instanceof f&&!t.isVisible()&&(b=this.editor.getSelection(),k=v._nextSibling(),h.forEach(function(n){t.parent.moveBefore(n,t)}),this.focus(r.focusElement||this._getElementName(e)),this.editor._onAction("moveNodes",{nodes:h,oldBeforeNode:k,newBeforeNode:t,oldSelection:b,newSelection:this.editor.getSelection()})))):c==40&&(l&&!s?(o=this._nextNode(),o&&(this.editor.deselect(!0),o.focus(r.focusElement||this._getElementName(e))),i=!0):!l&&w&&s&&p?(o=this._nextNode(),o&&(a=this.editor.multiselection,a.start=a.start||this,a.end=o,g=this.editor._findTopLevelNodes(a.start,a.end),this.editor.select(g),o.focus("field")),i=!0):l&&s&&p&&(o=v.expanded?v.append?v.append._nextNode():undefined:v._nextNode(),y=o&&(o._nextNode()||o.parent.append),y&&y.parent&&(b=this.editor.getSelection(),k=v._nextSibling(),h.forEach(function(n){y.parent.moveBefore(n,y)}),this.focus(r.focusElement||this._getElementName(e)),this.editor._onAction("moveNodes",{nodes:h,oldBeforeNode:k,newBeforeNode:y,oldSelection:b,newSelection:this.editor.getSelection()})),i=!0));i&&(n.preventDefault(),n.stopPropagation())};r.prototype._onExpand=function(n){if(n){var i=this.dom.tr.parentNode,t=i.parentNode,r=t.scrollTop;t.removeChild(i)}this.expanded?this.collapse(n):this.expand(n);n&&(t.appendChild(i),t.scrollTop=r)};r.onRemove=function(n){var u,f;if(!Array.isArray(n))return r.onRemove([n]);if(n&&n.length>0){var i=n[0],e=i.parent,t=i.editor,o=i.getIndex();t.highlighter.unhighlight();u=t.getSelection();r.blurNodes(n);f=t.getSelection();n.forEach(function(n){n.parent._remove(n)});t._onAction("removeNodes",{nodes:n.slice(0),parent:e,index:o,oldSelection:u,newSelection:f})}};r.onDuplicate=function(n){var o;if(!Array.isArray(n))return r.onDuplicate([n]);if(n&&n.length>0){var i=n[n.length-1],f=i.parent,t=i.editor;t.deselect(t.multiselection.nodes);var s=t.getSelection(),e=i,u=n.map(function(n){var t=n.clone();return f.insertAfter(t,e),e=t,t});n.length===1?u[0].focus():t.select(u);o=t.getSelection();t._onAction("duplicateNodes",{afterNode:i,nodes:u,parent:f,oldSelection:s,newSelection:o})}};r.prototype._onInsertBefore=function(n,t,i){var e=this.editor.getSelection(),u=new r(this.editor,{field:n!=undefined?n:"",value:t!=undefined?t:"",type:i}),f;u.expand(!0);this.parent.insertBefore(u,this);this.editor.highlighter.unhighlight();u.focus("field");f=this.editor.getSelection();this.editor._onAction("insertBeforeNodes",{nodes:[u],beforeNode:this,parent:this.parent,oldSelection:e,newSelection:f})};r.prototype._onInsertAfter=function(n,t,i){var e=this.editor.getSelection(),u=new r(this.editor,{field:n!=undefined?n:"",value:t!=undefined?t:"",type:i}),f;u.expand(!0);this.parent.insertAfter(u,this);this.editor.highlighter.unhighlight();u.focus("field");f=this.editor.getSelection();this.editor._onAction("insertAfterNodes",{nodes:[u],afterNode:this,parent:this.parent,oldSelection:e,newSelection:f})};r.prototype._onAppend=function(n,t,i){var e=this.editor.getSelection(),u=new r(this.editor,{field:n!=undefined?n:"",value:t!=undefined?t:"",type:i}),f;u.expand(!0);this.parent.appendChild(u);this.editor.highlighter.unhighlight();u.focus("field");f=this.editor.getSelection();this.editor._onAction("appendNodes",{nodes:[u],parent:this.parent,oldSelection:e,newSelection:f})};r.prototype._onChangeType=function(n){var t=this.type,i,r;n!=t&&(i=this.editor.getSelection(),this.changeType(n),r=this.editor.getSelection(),this.editor._onAction("changeType",{node:this,oldType:t,newType:n,oldSelection:i,newSelection:r}))};r.prototype.sort=function(n){var t,i,r,u;this._hasChilds()&&(t=n=="desc"?-1:1,i=this.type=="array"?"value":"field",this.hideChilds(),r=this.childs,u=this.sortOrder,this.childs=this.childs.concat(),this.childs.sort(function(n,r){return t*e(n[i],r[i])}),this.sortOrder=t==1?"asc":"desc",this.editor._onAction("sort",{node:this,oldChilds:r,oldSort:u,newChilds:this.childs,newSort:this.sortOrder}),this.showChilds())};r.prototype.getAppend=function(){return this.append||(this.append=new f(this.editor),this.append.setParent(this)),this.append.getDom()};r.getNodeFromTarget=function(n){while(n){if(n.node)return n.node;n=n.parentNode}return undefined};r.blurNodes=function(n){if(!Array.isArray(n)){r.blurNodes([n]);return}var u=n[0],t=u.parent,i=u.getIndex();t.childs[i+n.length]?t.childs[i+n.length].focus():t.childs[i-1]?t.childs[i-1].focus():t.focus()};r.prototype._nextSibling=function(){var n=this.parent.childs.indexOf(this);return this.parent.childs[n+1]||this.parent.append};r.prototype._previousNode=function(){var t=null,i=this.getDom(),n;if(i&&i.parentNode){n=i;do n=n.previousSibling,t=r.getNodeFromTarget(n);while(n&&t instanceof f&&!t.isVisible())}return t};r.prototype._nextNode=function(){var t=null,i=this.getDom(),n;if(i&&i.parentNode){n=i;do n=n.nextSibling,t=r.getNodeFromTarget(n);while(n&&t instanceof f&&!t.isVisible())}return t};r.prototype._firstNode=function(){var t=null,n=this.getDom(),i;return n&&n.parentNode&&(i=n.parentNode.firstChild,t=r.getNodeFromTarget(i)),t};r.prototype._lastNode=function(){var t=null,i=this.getDom(),n;if(i&&i.parentNode)for(n=i.parentNode.lastChild,t=r.getNodeFromTarget(n);n&&t instanceof f&&!t.isVisible();)n=n.previousSibling,t=r.getNodeFromTarget(n);return t};r.prototype._previousElement=function(n){var t=this.dom;switch(n){case t.value:if(this.fieldEditable)return t.field;case t.field:if(this._hasChilds())return t.expand;case t.expand:return t.menu;case t.menu:if(t.drag)return t.drag;default:return null}};r.prototype._nextElement=function(n){var t=this.dom;switch(n){case t.drag:return t.menu;case t.menu:if(this._hasChilds())return t.expand;case t.expand:if(this.fieldEditable)return t.field;case t.field:if(!this._hasChilds())return t.value;default:return null}};r.prototype._getElementName=function(n){var t=this.dom;for(var i in t)if(t.hasOwnProperty(i)&&t[i]==n)return i;return null};r.prototype._hasChilds=function(){return this.type=="array"||this.type=="object"};r.TYPE_TITLES={auto:'Field type "auto". The field type is automatically determined from the value and can be a string, number, boolean, or null.',object:'Field type "object". An object contains an unordered set of key/value pairs.',array:'Field type "array". An array contains an ordered collection of values.',string:'Field type "string". Field type is not determined from the value, but always returned as string.'};r.prototype.showContextMenu=function(n,t){var i=this,u=r.TYPE_TITLES,f=[],e,s,h;this.editable.value&&f.push({text:"Type",title:"Change the type of this field",className:"jsoneditor-type-"+this.type,submenu:[{text:"Auto",className:"jsoneditor-type-auto"+(this.type=="auto"?" jsoneditor-selected":""),title:u.auto,click:function(){i._onChangeType("auto")}},{text:"Array",className:"jsoneditor-type-array"+(this.type=="array"?" jsoneditor-selected":""),title:u.array,click:function(){i._onChangeType("array")}},{text:"Object",className:"jsoneditor-type-object"+(this.type=="object"?" jsoneditor-selected":""),title:u.object,click:function(){i._onChangeType("object")}},{text:"String",className:"jsoneditor-type-string"+(this.type=="string"?" jsoneditor-selected":""),title:u.string,click:function(){i._onChangeType("string")}}]});this._hasChilds()&&(e=this.sortOrder=="asc"?"desc":"asc",f.push({text:"Sort",title:"Sort the childs of this "+this.type,className:"jsoneditor-sort-"+e,click:function(){i.sort(e)},submenu:[{text:"Ascending",className:"jsoneditor-sort-asc",title:"Sort the childs of this "+this.type+" in ascending order",click:function(){i.sort("asc")}},{text:"Descending",className:"jsoneditor-sort-desc",title:"Sort the childs of this "+this.type+" in descending order",click:function(){i.sort("desc")}}]}));this.parent&&this.parent._hasChilds()&&(f.length&&f.push({type:"separator"}),s=i.parent.childs,i==s[s.length-1]&&f.push({text:"Append",title:"Append a new field with type 'auto' after this field (Ctrl+Shift+Ins)",submenuTitle:"Select the type of the field to be appended",className:"jsoneditor-append",click:function(){i._onAppend("","","auto")},submenu:[{text:"Auto",className:"jsoneditor-type-auto",title:u.auto,click:function(){i._onAppend("","","auto")}},{text:"Array",className:"jsoneditor-type-array",title:u.array,click:function(){i._onAppend("",[])}},{text:"Object",className:"jsoneditor-type-object",title:u.object,click:function(){i._onAppend("",{})}},{text:"String",className:"jsoneditor-type-string",title:u.string,click:function(){i._onAppend("","","string")}}]}),f.push({text:"Insert",title:"Insert a new field with type 'auto' before this field (Ctrl+Ins)",submenuTitle:"Select the type of the field to be inserted",className:"jsoneditor-insert",click:function(){i._onInsertBefore("","","auto")},submenu:[{text:"Auto",className:"jsoneditor-type-auto",title:u.auto,click:function(){i._onInsertBefore("","","auto")}},{text:"Array",className:"jsoneditor-type-array",title:u.array,click:function(){i._onInsertBefore("",[])}},{text:"Object",className:"jsoneditor-type-object",title:u.object,click:function(){i._onInsertBefore("",{})}},{text:"String",className:"jsoneditor-type-string",title:u.string,click:function(){i._onInsertBefore("","","string")}}]}),this.editable.field&&(f.push({text:"Duplicate",title:"Duplicate this field (Ctrl+D)",className:"jsoneditor-duplicate",click:function(){r.onDuplicate(i)}}),f.push({text:"Remove",title:"Remove this field (Ctrl+Del)",className:"jsoneditor-remove",click:function(){r.onRemove(i)}})));h=new o(f,{close:t});h.show(n,this.editor.content)};r.prototype._getType=function(n){return n instanceof Array?"array":n instanceof Object?"object":typeof n=="string"&&typeof this._stringCast(n)!="string"?"string":"auto"};r.prototype._stringCast=function(n){var t=n.toLowerCase(),i=Number(n),r=parseFloat(n);return n==""?"":t=="null"?null:t=="true"?!0:t=="false"?!1:isNaN(i)||isNaN(r)?n:i};r.prototype._escapeHTML=function(n){if(typeof n!="string")return String(n);var r=String(n).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/  /g," &nbsp;").replace(/^ /,"&nbsp;").replace(/ $/,"&nbsp;"),i=JSON.stringify(r),t=i.substring(1,i.length-1);return this.editor.options.escapeUnicode===!0&&(t=u.escapeUnicodeChars(t)),t};r.prototype._unescapeHTML=function(n){var t='"'+this._escapeJSON(n)+'"',i=u.parse(t);return i.replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&nbsp;|\u00A0/g," ").replace(/&amp;/g,"&")};r.prototype._escapeJSON=function(n){for(var i="",r=0,t;r<n.length;)t=n.charAt(r),t=="\n"?i+="\\n":t=="\\"?(i+=t,r++,t=n.charAt(r),(t===""||'"\\/bfnrtu'.indexOf(t)==-1)&&(i+="\\"),i+=t):i+=t=='"'?'\\"':t,r++;return i};f=s(r);n.exports=r},function(n){n.exports=function t(n,i){"use strict";var a=/(^([+\-]?(?:0|[1-9]\d*)(?:\.\d*)?(?:[eE][+\-]?\d+)?)?$|^0x[0-9a-f]+$|\d+)/gi,v=/(^[ ]*|[ ]*$)/g,y=/(^([\w ]+,?[\w ]+)?[\w ]+,?[\w ]+\d+:\d+(:\d+)?[\w ]?|^\d{1,4}[\/\-]\d{1,4}[\/\-]\d{1,4}|^\w+, \w+ \d+, \d{4})/,p=/^0x[0-9a-f]+$/i,w=/^0/,b=function(n){return t.insensitive&&(""+n).toLowerCase()||""+n},o=b(n).replace(v,"")||"",s=b(i).replace(v,"")||"",e=o.replace(a,'\0$1\0').replace(/\0$/,"").replace(/^\0/,"").split('\0'),h=s.replace(a,'\0$1\0').replace(/\0$/,"").replace(/^\0/,"").split('\0'),c=parseInt(o.match(p),16)||e.length!==1&&o.match(y)&&Date.parse(o),l=parseInt(s.match(p),16)||c&&s.match(y)&&Date.parse(s)||null,u,f,r,k;if(l){if(c<l)return-1;if(c>l)return 1}for(r=0,k=Math.max(e.length,h.length);r<k;r++){if(u=!(e[r]||"").match(w)&&parseFloat(e[r])||e[r]||0,f=!(h[r]||"").match(w)&&parseFloat(h[r])||h[r]||0,isNaN(u)!==isNaN(f))return isNaN(u)?1:-1;if(typeof u!=typeof f&&(u+="",f+=""),u<f)return-1;if(u>f)return 1}return 0}},function(n,t,i){"use strict";function f(n){function t(n){this.editor=n;this.dom={}}return t.prototype=new n,t.prototype.getDom=function(){var n=this.dom,r,u,t,f,i;return n.tr?n.tr:(this._updateEditability(),r=document.createElement("tr"),r.node=this,n.tr=r,this.editor.options.mode==="tree"&&(n.tdDrag=document.createElement("td"),u=document.createElement("td"),n.tdMenu=u,t=document.createElement("button"),t.type="button",t.className="jsoneditor-contextmenu",t.title="Click to open the actions menu (Ctrl+M)",n.menu=t,u.appendChild(n.menu)),f=document.createElement("td"),i=document.createElement("div"),i.innerHTML="(empty)",i.className="jsoneditor-readonly",f.appendChild(i),n.td=f,n.text=i,this.updateDom(),r)},t.prototype.updateDom=function(){var n=this.dom,i=n.td,r,t;i&&(i.style.paddingLeft=this.getLevel()*24+26+"px");r=n.text;r&&(r.innerHTML="(empty "+this.parent.type+")");t=n.tr;this.isVisible()?n.tr.firstChild||(n.tdDrag&&t.appendChild(n.tdDrag),n.tdMenu&&t.appendChild(n.tdMenu),t.appendChild(i)):n.tr.firstChild&&(n.tdDrag&&t.removeChild(n.tdDrag),n.tdMenu&&t.removeChild(n.tdMenu),t.removeChild(i))},t.prototype.isVisible=function(){return this.parent.childs.length==0},t.prototype.showContextMenu=function(t,i){var r=this,f=n.TYPE_TITLES,e=[{text:"Append",title:"Append a new field with type 'auto' (Ctrl+Shift+Ins)",submenuTitle:"Select the type of the field to be appended",className:"jsoneditor-insert",click:function(){r._onAppend("","","auto")},submenu:[{text:"Auto",className:"jsoneditor-type-auto",title:f.auto,click:function(){r._onAppend("","","auto")}},{text:"Array",className:"jsoneditor-type-array",title:f.array,click:function(){r._onAppend("",[])}},{text:"Object",className:"jsoneditor-type-object",title:f.object,click:function(){r._onAppend("",{})}},{text:"String",className:"jsoneditor-type-string",title:f.string,click:function(){r._onAppend("","","string")}}]}],o=new u(e,{close:i});o.show(t,this.editor.content)},t.prototype.onEvent=function(n){var u=n.type,f=n.target||n.srcElement,t=this.dom,e=t.menu,i;if(f==e&&(u=="mouseover"?this.editor.highlighter.highlight(this.parent):u=="mouseout"&&this.editor.highlighter.unhighlight()),u=="click"&&f==t.menu&&(i=this.editor.highlighter,i.highlight(this.parent),i.lock(),r.addClassName(t.menu,"jsoneditor-selected"),this.showContextMenu(t.menu,function(){r.removeClassName(t.menu,"jsoneditor-selected");i.unlock();i.unhighlight()})),u=="keydown")this.onKeyDown(n)},t}var r=i(4),u=i(7);n.exports=f},function(n,t,i){"use strict";function r(n,t,i,r){for(var o,s,c,v,f,e,l={code:{text:"Code",title:"Switch to code highlighter",click:function(){r("code")}},form:{text:"Form",title:"Switch to form editor",click:function(){r("form")}},text:{text:"Text",title:"Switch to plain text editor",click:function(){r("text")}},tree:{text:"Tree",title:"Switch to tree editor",click:function(){r("tree")}},view:{text:"View",title:"Switch to tree view",click:function(){r("view")}}},a=[],h=0;h<t.length;h++){if(o=t[h],s=l[o],!s)throw new Error('Unknown mode "'+o+'"');s.className="jsoneditor-type-modes"+(i==o?" jsoneditor-selected":"");a.push(s)}if(c=l[i],!c)throw new Error('Unknown mode "'+i+'"');v=c.text;f=document.createElement("button");f.type="button";f.className="jsoneditor-modes jsoneditor-separator";f.innerHTML=v+" &#x25BE;";f.title="Switch editor mode";f.onclick=function(){var n=new u(a);n.show(f)};e=document.createElement("div");e.className="jsoneditor-modes";e.style.position="relative";e.appendChild(f);n.appendChild(e);this.dom={container:n,box:f,frame:e}}var u=i(7);r.prototype.focus=function(){this.dom.box.focus()};r.prototype.destroy=function(){this.dom&&this.dom.frame&&this.dom.frame.parentNode&&this.dom.frame.parentNode.removeChild(this.dom.frame);this.dom=null};n.exports=r},function(n,t,i){"use strict";var e;try{e=i(13)}catch(s){}var o=i(11),u=i(4),r={},f=3;r.create=function(n,t){var l,r,s,h,i,f,c;if(t=t||{},this.options=t,this.indentation=t.indentation?Number(t.indentation):2,l=t.ace?t.ace:e,this.mode=t.mode=="code"?"code":"text",this.mode=="code"&&typeof l=="undefined"&&(this.mode="text",console.warn("Failed to load Ace editor, falling back to plain text mode. Please use a JSONEditor bundle including Ace, or pass Ace as via the configuration option `ace`.")),this.theme=t.theme||"ace/theme/jsoneditor",r=this,this.container=n,this.dom={},this.aceEditor=undefined,this.textarea=undefined,this.validateSchema=null,this._debouncedValidate=u.debounce(this.validate.bind(this),this.DEBOUNCE_INTERVAL),this.width=n.clientWidth,this.height=n.clientHeight,this.frame=document.createElement("div"),this.frame.className="jsoneditor jsoneditor-mode-"+this.options.mode,this.frame.onclick=function(n){n.preventDefault()},this.frame.onkeydown=function(n){r._onKeyDown(n)},this.menu=document.createElement("div"),this.menu.className="jsoneditor-menu",this.frame.appendChild(this.menu),s=document.createElement("button"),s.type="button",s.className="jsoneditor-format",s.title="Format JSON data, with proper indentation and line feeds (Ctrl+\\)",this.menu.appendChild(s),s.onclick=function(){try{r.format();r._onChange()}catch(n){r._onError(n)}},h=document.createElement("button"),h.type="button",h.className="jsoneditor-compact",h.title="Compact JSON data, remove all whitespaces (Ctrl+Shift+\\)",this.menu.appendChild(h),h.onclick=function(){try{r.compact();r._onChange()}catch(n){r._onError(n)}},this.options&&this.options.modes&&this.options.modes.length&&(this.modeSwitcher=new o(this.menu,this.options.modes,this.options.mode,function(n){r.setMode(n);r.modeSwitcher.focus()})),this.content=document.createElement("div"),this.content.className="jsoneditor-outer",this.frame.appendChild(this.content),this.container.appendChild(this.frame),this.mode=="code"){this.editorDom=document.createElement("div");this.editorDom.style.height="100%";this.editorDom.style.width="100%";this.content.appendChild(this.editorDom);i=l.edit(this.editorDom);i.$blockScrolling=Infinity;i.setTheme(this.theme);i.setShowPrintMargin(!1);i.setFontSize(13);i.getSession().setMode("ace/mode/json");i.getSession().setTabSize(this.indentation);i.getSession().setUseSoftTabs(!0);i.getSession().setUseWrapMode(!0);i.commands.bindKey("Ctrl-L",null);i.commands.bindKey("Command-L",null);this.aceEditor=i;this.hasOwnProperty("editor")||Object.defineProperty(this,"editor",{get:function(){return console.warn('Property "editor" has been renamed to "aceEditor".'),r.aceEditor},set:function(n){console.warn('Property "editor" has been renamed to "aceEditor".');r.aceEditor=n}});f=document.createElement("a");f.appendChild(document.createTextNode("powered by ace"));f.href="http://ace.ajax.org";f.target="_blank";f.className="jsoneditor-poweredBy";f.onclick=function(){window.open(f.href,f.target)};this.menu.appendChild(f);i.on("change",this._onChange.bind(this))}else c=document.createElement("textarea"),c.className="jsoneditor-text",c.spellcheck=!1,this.content.appendChild(c),this.textarea=c,this.textarea.oninput===null?this.textarea.oninput=this._onChange.bind(this):this.textarea.onchange=this._onChange.bind(this);this.setSchema(this.options.schema)};r._onChange=function(){if(this._debouncedValidate(),this.options.onChange)try{this.options.onChange()}catch(n){console.error("Error in onChange callback: ",n)}};r._onKeyDown=function(n){var i=n.which||n.keyCode,t=!1;i==220&&n.ctrlKey&&(n.shiftKey?(this.compact(),this._onChange()):(this.format(),this._onChange()),t=!0);t&&(n.preventDefault(),n.stopPropagation())};r.destroy=function(){this.aceEditor&&(this.aceEditor.destroy(),this.aceEditor=null);this.frame&&this.container&&this.frame.parentNode==this.container&&this.container.removeChild(this.frame);this.modeSwitcher&&(this.modeSwitcher.destroy(),this.modeSwitcher=null);this.textarea=null;this._debouncedValidate=null};r.compact=function(){var n=this.get(),t=JSON.stringify(n);this.setText(t)};r.format=function(){var n=this.get(),t=JSON.stringify(n,null,this.indentation);this.setText(t)};r.focus=function(){this.textarea&&this.textarea.focus();this.aceEditor&&this.aceEditor.focus()};r.resize=function(){if(this.aceEditor)this.aceEditor.resize(!1)};r.set=function(n){this.setText(JSON.stringify(n,null,this.indentation))};r.get=function(){var n=this.getText(),t;try{t=u.parse(n)}catch(i){n=u.sanitize(n);t=u.parse(n)}return t};r.getText=function(){return this.textarea?this.textarea.value:this.aceEditor?this.aceEditor.getValue():""};r.setText=function(n){var t,i;t=this.options.escapeUnicode===!0?u.escapeUnicodeChars(n):n;this.textarea&&(this.textarea.value=t);this.aceEditor&&(i=this.options.onChange,this.options.onChange=null,this.aceEditor.setValue(t,-1),this.options.onChange=i);this.validate()};r.validate=function(){var i,n,e,o,s,h,t,r,c;this.dom.validationErrors&&(this.dom.validationErrors.parentNode.removeChild(this.dom.validationErrors),this.dom.validationErrors=null,this.content.style.marginBottom="",this.content.style.paddingBottom="");i=!1;n=[];try{e=this.get();i=!0}catch(l){}i&&this.validateSchema&&(o=this.validateSchema(e),o||(n=this.validateSchema.errors.map(function(n){return u.improveSchemaError(n)})));n.length>0&&(s=n.length>f,s&&(n=n.slice(0,f),h=this.validateSchema.errors.length-f,n.push("("+h+" more errors...)")),t=document.createElement("div"),t.innerHTML='<table class="jsoneditor-text-errors"><tbody>'+n.map(function(n){var t;return t=typeof n=="string"?'<td colspan="2"><pre>'+n+"<\/pre><\/td>":"<td>"+n.dataPath+"<\/td><td>"+n.message+"<\/td>",'<tr><td><button class="jsoneditor-schema-error"><\/button><\/td>'+t+"<\/tr>"}).join("")+"<\/tbody><\/table>",this.dom.validationErrors=t,this.frame.appendChild(t),r=t.clientHeight,this.content.style.marginBottom=-r+"px",this.content.style.paddingBottom=r+"px");this.aceEditor&&(c=!1,this.aceEditor.resize(c))};n.exports=[{mode:"text",mixin:r,data:"text",load:r.format},{mode:"code",mixin:r,data:"text",load:r.format}]},function(n,t,i){var r=i(!function(){var n=new Error('Cannot find module "brace"');n.code="MODULE_NOT_FOUND";throw n;}());i(14);i(16);i(17);n.exports=r},function(n,t,i){ace.define("ace/mode/json_highlight_rules",["require","exports","module","ace/lib/oop","ace/mode/text_highlight_rules"],function(n,t){"use strict";var r=n("../lib/oop"),u=n("./text_highlight_rules").TextHighlightRules,i=function(){this.$rules={start:[{token:"variable",regex:'["](?:(?:\\\\.)|(?:[^"\\\\]))*?["]\\s*(?=:)'},{token:"string",regex:'"',next:"string"},{token:"constant.numeric",regex:"0[xX][0-9a-fA-F]+\\b"},{token:"constant.numeric",regex:"[+-]?\\d+(?:(?:\\.\\d*)?(?:[eE][+-]?\\d+)?)?\\b"},{token:"constant.language.boolean",regex:"(?:true|false)\\b"},{token:"invalid.illegal",regex:"['](?:(?:\\\\.)|(?:[^'\\\\]))*?[']"},{token:"invalid.illegal",regex:"\\/\\/.*$"},{token:"paren.lparen",regex:"[[({]"},{token:"paren.rparen",regex:"[\\])}]"},{token:"text",regex:"\\s+"}],string:[{token:"constant.language.escape",regex:/\\(?:x[0-9a-fA-F]{2}|u[0-9a-fA-F]{4}|["\\\/bfnrt])/},{token:"string",regex:'[^"\\\\]+'},{token:"string",regex:'"',next:"start"},{token:"string",regex:"",next:"start"}]}};r.inherits(i,u);t.JsonHighlightRules=i});ace.define("ace/mode/matching_brace_outdent",["require","exports","module","ace/range"],function(n,t){"use strict";var r=n("../range").Range,i=function(){};(function(){this.checkOutdent=function(n,t){return/^\s+$/.test(n)?/^\s*\}/.test(t):!1};this.autoOutdent=function(n,t){var o=n.getLine(t),f=o.match(/^(\s*\})/),u,i,e;if(!f||(u=f[1].length,i=n.findMatchingBracket({row:t,column:u}),!i||i.row==t))return 0;e=this.$getIndent(n.getLine(i.row));n.replace(new r(t,0,t,u-1),e)};this.$getIndent=function(n){return n.match(/^\s*/)[0]}}).call(i.prototype);t.MatchingBraceOutdent=i});ace.define("ace/mode/behaviour/cstyle",["require","exports","module","ace/lib/oop","ace/mode/behaviour","ace/token_iterator","ace/lib/lang"],function(n,t){"use strict";var h=n("../../lib/oop"),c=n("../behaviour").Behaviour,o=n("../../token_iterator").TokenIterator,l=n("../../lib/lang"),s=["text","paren.rparen","punctuation.operator"],a=["text","paren.rparen","punctuation.operator","comment"],i,f={},u=function(n){var t=-1;if(n.multiSelect&&(t=n.selection.index,f.rangeCount!=n.multiSelect.rangeCount&&(f={rangeCount:n.multiSelect.rangeCount})),f[t])return i=f[t];i=f[t]={autoInsertedBrackets:0,autoInsertedRow:-1,autoInsertedLineEnd:"",maybeInsertedBrackets:0,maybeInsertedRow:-1,maybeInsertedLineStart:"",maybeInsertedLineEnd:""}},e=function(n,t,i,r){var u=n.end.row-n.start.row;return{text:i+t+r,selection:[0,n.start.column+1,u,n.end.column+(u?0:1)]}},r=function(){this.add("braces","insertion",function(n,t,f,o,s){var h=f.getCursorPosition(),c=o.doc.getLine(h.row),b,a,d,y,v,k,p,w;if(s=="{"){if(u(f),b=f.getSelectionRange(),a=o.doc.getTextRange(b),a!==""&&a!=="{"&&f.getWrapBehavioursEnabled())return e(b,a,"{","}");if(r.isSaneInsertion(f,o))return/[\]\}\)]/.test(c[h.column])||f.inMultiSelectMode?(r.recordAutoInsert(f,o,"}"),{text:"{}",selection:[1,1]}):(r.recordMaybeInsert(f,o,"{"),{text:"{",selection:[1,1]})}else if(s=="}"){if(u(f),v=c.substring(h.column,h.column+1),v=="}"&&(d=o.$findOpeningBracket("}",{column:h.column+1,row:h.row}),d!==null&&r.isAutoInsertedClosing(h,c,s)))return r.popAutoInsertedClosing(),{text:"",selection:[1,1]}}else{if(s=="\n"||s=="\r\n"){if(u(f),y="",r.isMaybeInsertedClosing(h,c)&&(y=l.stringRepeat("}",i.maybeInsertedBrackets),r.clearMaybeInsertedClosing()),v=c.substring(h.column,h.column+1),v==="}"){if(k=o.findMatchingBracket({row:h.row,column:h.column+1},"}"),!k)return null;p=this.$getIndent(o.getLine(k.row))}else if(y)p=this.$getIndent(c);else{r.clearMaybeInsertedClosing();return}return w=p+o.getTabString(),{text:"\n"+w+"\n"+p+y,selection:[1,w.length,1,w.length]}}r.clearMaybeInsertedClosing()}});this.add("braces","deletion",function(n,t,r,f,e){var h=f.doc.getTextRange(e),o,s;if(!e.isMultiLine()&&h=="{"){if(u(r),o=f.doc.getLine(e.start.row),s=o.substring(e.end.column,e.end.column+1),s=="}")return e.end.column++,e;i.maybeInsertedBrackets--}});this.add("parens","insertion",function(n,t,i,f,o){var h,c,a;if(o=="("){if(u(i),h=i.getSelectionRange(),c=f.doc.getTextRange(h),c!==""&&i.getWrapBehavioursEnabled())return e(h,c,"(",")");if(r.isSaneInsertion(i,f))return r.recordAutoInsert(i,f,")"),{text:"()",selection:[1,1]}}else if(o==")"){u(i);var s=i.getCursorPosition(),l=f.doc.getLine(s.row),v=l.substring(s.column,s.column+1);if(v==")"&&(a=f.$findOpeningBracket(")",{column:s.column+1,row:s.row}),a!==null&&r.isAutoInsertedClosing(s,l,o)))return r.popAutoInsertedClosing(),{text:"",selection:[1,1]}}});this.add("parens","deletion",function(n,t,i,r,f){var s=r.doc.getTextRange(f),e,o;if(!f.isMultiLine()&&s=="("&&(u(i),e=r.doc.getLine(f.start.row),o=e.substring(f.start.column+1,f.start.column+2),o==")"))return f.end.column++,f});this.add("brackets","insertion",function(n,t,i,f,o){var h,c,a;if(o=="["){if(u(i),h=i.getSelectionRange(),c=f.doc.getTextRange(h),c!==""&&i.getWrapBehavioursEnabled())return e(h,c,"[","]");if(r.isSaneInsertion(i,f))return r.recordAutoInsert(i,f,"]"),{text:"[]",selection:[1,1]}}else if(o=="]"){u(i);var s=i.getCursorPosition(),l=f.doc.getLine(s.row),v=l.substring(s.column,s.column+1);if(v=="]"&&(a=f.$findOpeningBracket("]",{column:s.column+1,row:s.row}),a!==null&&r.isAutoInsertedClosing(s,l,o)))return r.popAutoInsertedClosing(),{text:"",selection:[1,1]}}});this.add("brackets","deletion",function(n,t,i,r,f){var s=r.doc.getTextRange(f),e,o;if(!f.isMultiLine()&&s=="["&&(u(i),e=r.doc.getLine(f.start.row),o=e.substring(f.start.column+1,f.start.column+2),o=="]"))return f.end.column++,f});this.add("string_dquotes","insertion",function(n,t,i,r,f){var a,v,w,c,g,nt;if(f=='"'||f=="'"){u(i);var s=f,b=i.getSelectionRange(),h=r.doc.getTextRange(b);if(h!==""&&h!=="'"&&h!='"'&&i.getWrapBehavioursEnabled())return e(b,h,s,s);if(!h){var o=i.getCursorPosition(),k=r.doc.getLine(o.row),y=k.substring(o.column-1,o.column),p=k.substring(o.column,o.column+1),l=r.getTokenAt(o.row,o.column),d=r.getTokenAt(o.row,o.column+1);if(y=="\\"&&l&&/escape/.test(l.type))return null;if(a=l&&/string|escape/.test(l.type),v=!d||/string|escape/.test(d.type),p==s)w=a!==v;else{if(a&&!v||a&&v||(c=r.$mode.tokenRe,c.lastIndex=0,g=c.test(y),c.lastIndex=0,nt=c.test(y),g||nt)||p&&!/[\s;,.})\]\\]/.test(p))return null;w=!0}return{text:w?s+s:"",selection:[1,1]}}}});this.add("string_dquotes","deletion",function(n,t,i,r,f){var e=r.doc.getTextRange(f),o,s;if(!f.isMultiLine()&&(e=='"'||e=="'")&&(u(i),o=r.doc.getLine(f.start.row),s=o.substring(f.start.column+1,f.start.column+2),s==e))return f.end.column++,f})};r.isSaneInsertion=function(n,t){var i=n.getCursorPosition(),r=new o(t,i.row,i.column),u;return!this.$matchTokenType(r.getCurrentToken()||"text",s)&&(u=new o(t,i.row,i.column+1),!this.$matchTokenType(u.getCurrentToken()||"text",s))?!1:(r.stepForward(),r.getCurrentTokenRow()!==i.row||this.$matchTokenType(r.getCurrentToken()||"text",a))};r.$matchTokenType=function(n,t){return t.indexOf(n.type||n)>-1};r.recordAutoInsert=function(n,t,r){var u=n.getCursorPosition(),f=t.doc.getLine(u.row);this.isAutoInsertedClosing(u,f,i.autoInsertedLineEnd[0])||(i.autoInsertedBrackets=0);i.autoInsertedRow=u.row;i.autoInsertedLineEnd=r+f.substr(u.column);i.autoInsertedBrackets++};r.recordMaybeInsert=function(n,t,r){var u=n.getCursorPosition(),f=t.doc.getLine(u.row);this.isMaybeInsertedClosing(u,f)||(i.maybeInsertedBrackets=0);i.maybeInsertedRow=u.row;i.maybeInsertedLineStart=f.substr(0,u.column)+r;i.maybeInsertedLineEnd=f.substr(u.column);i.maybeInsertedBrackets++};r.isAutoInsertedClosing=function(n,t,r){return i.autoInsertedBrackets>0&&n.row===i.autoInsertedRow&&r===i.autoInsertedLineEnd[0]&&t.substr(n.column)===i.autoInsertedLineEnd};r.isMaybeInsertedClosing=function(n,t){return i.maybeInsertedBrackets>0&&n.row===i.maybeInsertedRow&&t.substr(n.column)===i.maybeInsertedLineEnd&&t.substr(0,n.column)==i.maybeInsertedLineStart};r.popAutoInsertedClosing=function(){i.autoInsertedLineEnd=i.autoInsertedLineEnd.substr(1);i.autoInsertedBrackets--};r.clearMaybeInsertedClosing=function(){i&&(i.maybeInsertedBrackets=0,i.maybeInsertedRow=-1)};h.inherits(r,c);t.CstyleBehaviour=r});ace.define("ace/mode/folding/cstyle",["require","exports","module","ace/lib/oop","ace/range","ace/mode/folding/fold_mode"],function(n,t){"use strict";var u=n("../../lib/oop"),i=n("../../range").Range,f=n("./fold_mode").FoldMode,r=t.FoldMode=function(n){n&&(this.foldingStartMarker=new RegExp(this.foldingStartMarker.source.replace(/\|[^|]*?$/,"|"+n.start)),this.foldingStopMarker=new RegExp(this.foldingStopMarker.source.replace(/\|[^|]*?$/,"|"+n.end)))};u.inherits(r,f),function(){this.foldingStartMarker=/(\{|\[)[^\}\]]*$|^\s*(\/\*)/;this.foldingStopMarker=/^[^\[\{]*(\}|\])|^[\s\*]*(\*\/)/;this.singleLineBlockCommentRe=/^\s*(\/\*).*\*\/\s*$/;this.tripleStarBlockCommentRe=/^\s*(\/\*\*\*).*\*\/\s*$/;this.startRegionRe=/^\s*(\/\*|\/\/)#?region\b/;this._getFoldWidgetBase=this.getFoldWidget;this.getFoldWidget=function(n,t,i){var r=n.getLine(i),u;return this.singleLineBlockCommentRe.test(r)&&!this.startRegionRe.test(r)&&!this.tripleStarBlockCommentRe.test(r)?"":(u=this._getFoldWidgetBase(n,t,i),!u&&this.startRegionRe.test(r))?"start":u};this.getFoldWidgetRange=function(n,t,i,r){var o=n.getLine(i),e,u,f;return this.startRegionRe.test(o)?this.getCommentRegionBlock(n,o,i):(u=o.match(this.foldingStartMarker),u)?(f=u.index,u[1])?this.openingBracketBlock(n,u[1],i,f):(e=n.getCommentFoldRange(i,f+u[0].length,1),e&&!e.isMultiLine()&&(r?e=this.getSectionRange(n,i):t!="all"&&(e=null)),e):t==="markbegin"?void 0:(u=o.match(this.foldingStopMarker),u?(f=u.index+u[0].length,u[1])?this.closingBracketBlock(n,u[1],i,f):n.getCommentFoldRange(i,f,-1):void 0)};this.getSectionRange=function(n,t){var u=n.getLine(t),o=u.search(/\S/),s=t,c=u.length,f,h,e,r;for(t=t+1,f=t,h=n.getLength();++t<h;)if(u=n.getLine(t),e=u.search(/\S/),e!==-1){if(o>e)break;if(r=this.getFoldWidgetRange(n,"all",t),r)if(r.start.row<=s)break;else if(r.isMultiLine())t=r.end.row;else if(o==e)break;f=t}return new i(s,c,f,n.getLine(f).length)};this.getCommentRegionBlock=function(n,t,r){for(var s=t.search(/\s*$/),h=n.getLength(),o=r,u=1,f,e;++r<h;)if((t=n.getLine(r),f=/^\s*(?:\/\*|\/\/|--)#?(end)?region\b/.exec(t),f)&&(f[1]?u--:u++,!u))break;return e=r,e>o?new i(o,s,e,t.length):void 0}}.call(r.prototype)});ace.define("ace/mode/json",["require","exports","module","ace/lib/oop","ace/mode/text","ace/mode/json_highlight_rules","ace/mode/matching_brace_outdent","ace/mode/behaviour/cstyle","ace/mode/folding/cstyle","ace/worker/worker_client"],function(n,t){"use strict";var u=n("../lib/oop"),f=n("./text").Mode,e=n("./json_highlight_rules").JsonHighlightRules,o=n("./matching_brace_outdent").MatchingBraceOutdent,s=n("./behaviour/cstyle").CstyleBehaviour,h=n("./folding/cstyle").FoldMode,c=n("../worker/worker_client").WorkerClient,r=function(){this.HighlightRules=e;this.$outdent=new o;this.$behaviour=new s;this.foldingRules=new h};u.inherits(r,f),function(){this.getNextLineIndent=function(n,t,i){var r=this.$getIndent(t),u;return n=="start"&&(u=t.match(/^.*[\{\(\[]\s*$/),u&&(r+=i)),r};this.checkOutdent=function(n,t,i){return this.$outdent.checkOutdent(t,i)};this.autoOutdent=function(n,t,i){this.$outdent.autoOutdent(t,i)};this.createWorker=function(n){var t=new c(["ace"],i(15),"JsonWorker");t.attachToDocument(n.getDocument());t.on("annotate",function(t){n.setAnnotations(t.data)});t.on("terminate",function(){n.clearAnnotations()});return t};this.$id="ace/mode/json"}.call(r.prototype);t.Mode=r})},function(n){n.exports.id="ace/mode/json_worker";n.exports.src='"no use strict";(function(window){function resolveModuleId(id,paths){for(var testPath=id,tail="";testPath;){var alias=paths[testPath];if("string"==typeof alias)return alias+tail;if(alias)return alias.location.replace(/\\/*$/,"/")+(tail||alias.main||alias.name);if(alias===!1)return"";var i=testPath.lastIndexOf("/");if(-1===i)break;tail=testPath.substr(i)+tail,testPath=testPath.slice(0,i)}return id}if(!(void 0!==window.window&&window.document||window.acequire&&window.define)){window.console||(window.console=function(){var msgs=Array.prototype.slice.call(arguments,0);postMessage({type:"log",data:msgs})},window.console.error=window.console.warn=window.console.log=window.console.trace=window.console),window.window=window,window.ace=window,window.onerror=function(message,file,line,col,err){postMessage({type:"error",data:{message:message,data:err.data,file:file,line:line,col:col,stack:err.stack}})},window.normalizeModule=function(parentId,moduleName){if(-1!==moduleName.indexOf("!")){var chunks=moduleName.split("!");return window.normalizeModule(parentId,chunks[0])+"!"+window.normalizeModule(parentId,chunks[1])}if("."==moduleName.charAt(0)){var base=parentId.split("/").slice(0,-1).join("/");for(moduleName=(base?base+"/":"")+moduleName;-1!==moduleName.indexOf(".")&&previous!=moduleName;){var previous=moduleName;moduleName=moduleName.replace(/^\\.\\//,"").replace(/\\/\\.\\//,"/").replace(/[^\\/]+\\/\\.\\.\\//,"")}}return moduleName},window.acequire=function acequire(parentId,id){if(id||(id=parentId,parentId=null),!id.charAt)throw Error("worker.js acequire() accepts only (parentId, id) as arguments");id=window.normalizeModule(parentId,id);var module=window.acequire.modules[id];if(module)return module.initialized||(module.initialized=!0,module.exports=module.factory().exports),module.exports;if(!window.acequire.tlns)return console.log("unable to load "+id);var path=resolveModuleId(id,window.acequire.tlns);return".js"!=path.slice(-3)&&(path+=".js"),window.acequire.id=id,window.acequire.modules[id]={},importScripts(path),window.acequire(parentId,id)},window.acequire.modules={},window.acequire.tlns={},window.define=function(id,deps,factory){if(2==arguments.length?(factory=deps,"string"!=typeof id&&(deps=id,id=window.acequire.id)):1==arguments.length&&(factory=id,deps=[],id=window.acequire.id),"function"!=typeof factory)return window.acequire.modules[id]={exports:factory,initialized:!0},void 0;deps.length||(deps=["require","exports","module"]);var req=function(childId){return window.acequire(id,childId)};window.acequire.modules[id]={exports:{},factory:function(){var module=this,returnExports=factory.apply(this,deps.map(function(dep){switch(dep){case"require":return req;case"exports":return module.exports;case"module":return module;default:return req(dep)}}));return returnExports&&(module.exports=returnExports),module}}},window.define.amd={},acequire.tlns={},window.initBaseUrls=function(topLevelNamespaces){for(var i in topLevelNamespaces)acequire.tlns[i]=topLevelNamespaces[i]},window.initSender=function(){var EventEmitter=window.acequire("ace/lib/event_emitter").EventEmitter,oop=window.acequire("ace/lib/oop"),Sender=function(){};return function(){oop.implement(this,EventEmitter),this.callback=function(data,callbackId){postMessage({type:"call",id:callbackId,data:data})},this.emit=function(name,data){postMessage({type:"event",name:name,data:data})}}.call(Sender.prototype),new Sender};var main=window.main=null,sender=window.sender=null;window.onmessage=function(e){var msg=e.data;if(msg.event&&sender)sender._signal(msg.event,msg.data);else if(msg.command)if(main[msg.command])main[msg.command].apply(main,msg.args);else{if(!window[msg.command])throw Error("Unknown command:"+msg.command);window[msg.command].apply(window,msg.args)}else if(msg.init){window.initBaseUrls(msg.tlns),acequire("ace/lib/es5-shim"),sender=window.sender=window.initSender();var clazz=acequire(msg.module)[msg.classname];main=window.main=new clazz(sender)}}}})(this),ace.define("ace/lib/oop",["require","exports","module"],function(acequire,exports){"use strict";exports.inherits=function(ctor,superCtor){ctor.super_=superCtor,ctor.prototype=Object.create(superCtor.prototype,{constructor:{value:ctor,enumerable:!1,writable:!0,configurable:!0}})},exports.mixin=function(obj,mixin){for(var key in mixin)obj[key]=mixin[key];return obj},exports.implement=function(proto,mixin){exports.mixin(proto,mixin)}}),ace.define("ace/range",["require","exports","module"],function(acequire,exports){"use strict";var comparePoints=function(p1,p2){return p1.row-p2.row||p1.column-p2.column},Range=function(startRow,startColumn,endRow,endColumn){this.start={row:startRow,column:startColumn},this.end={row:endRow,column:endColumn}};(function(){this.isEqual=function(range){return this.start.row===range.start.row&&this.end.row===range.end.row&&this.start.column===range.start.column&&this.end.column===range.end.column},this.toString=function(){return"Range: ["+this.start.row+"/"+this.start.column+"] -> ["+this.end.row+"/"+this.end.column+"]"},this.contains=function(row,column){return 0==this.compare(row,column)},this.compareRange=function(range){var cmp,end=range.end,start=range.start;return cmp=this.compare(end.row,end.column),1==cmp?(cmp=this.compare(start.row,start.column),1==cmp?2:0==cmp?1:0):-1==cmp?-2:(cmp=this.compare(start.row,start.column),-1==cmp?-1:1==cmp?42:0)},this.comparePoint=function(p){return this.compare(p.row,p.column)},this.containsRange=function(range){return 0==this.comparePoint(range.start)&&0==this.comparePoint(range.end)},this.intersects=function(range){var cmp=this.compareRange(range);return-1==cmp||0==cmp||1==cmp},this.isEnd=function(row,column){return this.end.row==row&&this.end.column==column},this.isStart=function(row,column){return this.start.row==row&&this.start.column==column},this.setStart=function(row,column){"object"==typeof row?(this.start.column=row.column,this.start.row=row.row):(this.start.row=row,this.start.column=column)},this.setEnd=function(row,column){"object"==typeof row?(this.end.column=row.column,this.end.row=row.row):(this.end.row=row,this.end.column=column)},this.inside=function(row,column){return 0==this.compare(row,column)?this.isEnd(row,column)||this.isStart(row,column)?!1:!0:!1},this.insideStart=function(row,column){return 0==this.compare(row,column)?this.isEnd(row,column)?!1:!0:!1},this.insideEnd=function(row,column){return 0==this.compare(row,column)?this.isStart(row,column)?!1:!0:!1},this.compare=function(row,column){return this.isMultiLine()||row!==this.start.row?this.start.row>row?-1:row>this.end.row?1:this.start.row===row?column>=this.start.column?0:-1:this.end.row===row?this.end.column>=column?0:1:0:this.start.column>column?-1:column>this.end.column?1:0},this.compareStart=function(row,column){return this.start.row==row&&this.start.column==column?-1:this.compare(row,column)},this.compareEnd=function(row,column){return this.end.row==row&&this.end.column==column?1:this.compare(row,column)},this.compareInside=function(row,column){return this.end.row==row&&this.end.column==column?1:this.start.row==row&&this.start.column==column?-1:this.compare(row,column)},this.clipRows=function(firstRow,lastRow){if(this.end.row>lastRow)var end={row:lastRow+1,column:0};else if(firstRow>this.end.row)var end={row:firstRow,column:0};if(this.start.row>lastRow)var start={row:lastRow+1,column:0};else if(firstRow>this.start.row)var start={row:firstRow,column:0};return Range.fromPoints(start||this.start,end||this.end)},this.extend=function(row,column){var cmp=this.compare(row,column);if(0==cmp)return this;if(-1==cmp)var start={row:row,column:column};else var end={row:row,column:column};return Range.fromPoints(start||this.start,end||this.end)},this.isEmpty=function(){return this.start.row===this.end.row&&this.start.column===this.end.column},this.isMultiLine=function(){return this.start.row!==this.end.row},this.clone=function(){return Range.fromPoints(this.start,this.end)},this.collapseRows=function(){return 0==this.end.column?new Range(this.start.row,0,Math.max(this.start.row,this.end.row-1),0):new Range(this.start.row,0,this.end.row,0)},this.toScreenRange=function(session){var screenPosStart=session.documentToScreenPosition(this.start),screenPosEnd=session.documentToScreenPosition(this.end);return new Range(screenPosStart.row,screenPosStart.column,screenPosEnd.row,screenPosEnd.column)},this.moveBy=function(row,column){this.start.row+=row,this.start.column+=column,this.end.row+=row,this.end.column+=column}}).call(Range.prototype),Range.fromPoints=function(start,end){return new Range(start.row,start.column,end.row,end.column)},Range.comparePoints=comparePoints,Range.comparePoints=function(p1,p2){return p1.row-p2.row||p1.column-p2.column},exports.Range=Range}),ace.define("ace/apply_delta",["require","exports","module"],function(acequire,exports){"use strict";exports.applyDelta=function(docLines,delta){var row=delta.start.row,startColumn=delta.start.column,line=docLines[row]||"";switch(delta.action){case"insert":var lines=delta.lines;if(1===lines.length)docLines[row]=line.substring(0,startColumn)+delta.lines[0]+line.substring(startColumn);else{var args=[row,1].concat(delta.lines);docLines.splice.apply(docLines,args),docLines[row]=line.substring(0,startColumn)+docLines[row],docLines[row+delta.lines.length-1]+=line.substring(startColumn)}break;case"remove":var endColumn=delta.end.column,endRow=delta.end.row;row===endRow?docLines[row]=line.substring(0,startColumn)+line.substring(endColumn):docLines.splice(row,endRow-row+1,line.substring(0,startColumn)+docLines[endRow].substring(endColumn))}}}),ace.define("ace/lib/event_emitter",["require","exports","module"],function(acequire,exports){"use strict";var EventEmitter={},stopPropagation=function(){this.propagationStopped=!0},preventDefault=function(){this.defaultPrevented=!0};EventEmitter._emit=EventEmitter._dispatchEvent=function(eventName,e){this._eventRegistry||(this._eventRegistry={}),this._defaultHandlers||(this._defaultHandlers={});var listeners=this._eventRegistry[eventName]||[],defaultHandler=this._defaultHandlers[eventName];if(listeners.length||defaultHandler){"object"==typeof e&&e||(e={}),e.type||(e.type=eventName),e.stopPropagation||(e.stopPropagation=stopPropagation),e.preventDefault||(e.preventDefault=preventDefault),listeners=listeners.slice();for(var i=0;listeners.length>i&&(listeners[i](e,this),!e.propagationStopped);i++);return defaultHandler&&!e.defaultPrevented?defaultHandler(e,this):void 0}},EventEmitter._signal=function(eventName,e){var listeners=(this._eventRegistry||{})[eventName];if(listeners){listeners=listeners.slice();for(var i=0;listeners.length>i;i++)listeners[i](e,this)}},EventEmitter.once=function(eventName,callback){var _self=this;callback&&this.addEventListener(eventName,function newCallback(){_self.removeEventListener(eventName,newCallback),callback.apply(null,arguments)})},EventEmitter.setDefaultHandler=function(eventName,callback){var handlers=this._defaultHandlers;if(handlers||(handlers=this._defaultHandlers={_disabled_:{}}),handlers[eventName]){var old=handlers[eventName],disabled=handlers._disabled_[eventName];disabled||(handlers._disabled_[eventName]=disabled=[]),disabled.push(old);var i=disabled.indexOf(callback);-1!=i&&disabled.splice(i,1)}handlers[eventName]=callback},EventEmitter.removeDefaultHandler=function(eventName,callback){var handlers=this._defaultHandlers;if(handlers){var disabled=handlers._disabled_[eventName];if(handlers[eventName]==callback)handlers[eventName],disabled&&this.setDefaultHandler(eventName,disabled.pop());else if(disabled){var i=disabled.indexOf(callback);-1!=i&&disabled.splice(i,1)}}},EventEmitter.on=EventEmitter.addEventListener=function(eventName,callback,capturing){this._eventRegistry=this._eventRegistry||{};var listeners=this._eventRegistry[eventName];return listeners||(listeners=this._eventRegistry[eventName]=[]),-1==listeners.indexOf(callback)&&listeners[capturing?"unshift":"push"](callback),callback},EventEmitter.off=EventEmitter.removeListener=EventEmitter.removeEventListener=function(eventName,callback){this._eventRegistry=this._eventRegistry||{};var listeners=this._eventRegistry[eventName];if(listeners){var index=listeners.indexOf(callback);-1!==index&&listeners.splice(index,1)}},EventEmitter.removeAllListeners=function(eventName){this._eventRegistry&&(this._eventRegistry[eventName]=[])},exports.EventEmitter=EventEmitter}),ace.define("ace/anchor",["require","exports","module","ace/lib/oop","ace/lib/event_emitter"],function(acequire,exports){"use strict";var oop=acequire("./lib/oop"),EventEmitter=acequire("./lib/event_emitter").EventEmitter,Anchor=exports.Anchor=function(doc,row,column){this.$onChange=this.onChange.bind(this),this.attach(doc),column===void 0?this.setPosition(row.row,row.column):this.setPosition(row,column)};(function(){function $pointsInOrder(point1,point2,equalPointsInOrder){var bColIsAfter=equalPointsInOrder?point1.column<=point2.column:point1.column<point2.column;return point1.row<point2.row||point1.row==point2.row&&bColIsAfter}function $getTransformedPoint(delta,point,moveIfEqual){var deltaIsInsert="insert"==delta.action,deltaRowShift=(deltaIsInsert?1:-1)*(delta.end.row-delta.start.row),deltaColShift=(deltaIsInsert?1:-1)*(delta.end.column-delta.start.column),deltaStart=delta.start,deltaEnd=deltaIsInsert?deltaStart:delta.end;return $pointsInOrder(point,deltaStart,moveIfEqual)?{row:point.row,column:point.column}:$pointsInOrder(deltaEnd,point,!moveIfEqual)?{row:point.row+deltaRowShift,column:point.column+(point.row==deltaEnd.row?deltaColShift:0)}:{row:deltaStart.row,column:deltaStart.column}}oop.implement(this,EventEmitter),this.getPosition=function(){return this.$clipPositionToDocument(this.row,this.column)},this.getDocument=function(){return this.document},this.$insertRight=!1,this.onChange=function(delta){if(!(delta.start.row==delta.end.row&&delta.start.row!=this.row||delta.start.row>this.row)){var point=$getTransformedPoint(delta,{row:this.row,column:this.column},this.$insertRight);this.setPosition(point.row,point.column,!0)}},this.setPosition=function(row,column,noClip){var pos;if(pos=noClip?{row:row,column:column}:this.$clipPositionToDocument(row,column),this.row!=pos.row||this.column!=pos.column){var old={row:this.row,column:this.column};this.row=pos.row,this.column=pos.column,this._signal("change",{old:old,value:pos})}},this.detach=function(){this.document.removeEventListener("change",this.$onChange)},this.attach=function(doc){this.document=doc||this.document,this.document.on("change",this.$onChange)},this.$clipPositionToDocument=function(row,column){var pos={};return row>=this.document.getLength()?(pos.row=Math.max(0,this.document.getLength()-1),pos.column=this.document.getLine(pos.row).length):0>row?(pos.row=0,pos.column=0):(pos.row=row,pos.column=Math.min(this.document.getLine(pos.row).length,Math.max(0,column))),0>column&&(pos.column=0),pos}}).call(Anchor.prototype)}),ace.define("ace/document",["require","exports","module","ace/lib/oop","ace/apply_delta","ace/lib/event_emitter","ace/range","ace/anchor"],function(acequire,exports){"use strict";var oop=acequire("./lib/oop"),applyDelta=acequire("./apply_delta").applyDelta,EventEmitter=acequire("./lib/event_emitter").EventEmitter,Range=acequire("./range").Range,Anchor=acequire("./anchor").Anchor,Document=function(textOrLines){this.$lines=[""],0===textOrLines.length?this.$lines=[""]:Array.isArray(textOrLines)?this.insertMergedLines({row:0,column:0},textOrLines):this.insert({row:0,column:0},textOrLines)};(function(){oop.implement(this,EventEmitter),this.setValue=function(text){var len=this.getLength()-1;this.remove(new Range(0,0,len,this.getLine(len).length)),this.insert({row:0,column:0},text)},this.getValue=function(){return this.getAllLines().join(this.getNewLineCharacter())},this.createAnchor=function(row,column){return new Anchor(this,row,column)},this.$split=0==="aaa".split(/a/).length?function(text){return text.replace(/\\r\\n|\\r/g,"\\n").split("\\n")}:function(text){return text.split(/\\r\\n|\\r|\\n/)},this.$detectNewLine=function(text){var match=text.match(/^.*?(\\r\\n|\\r|\\n)/m);this.$autoNewLine=match?match[1]:"\\n",this._signal("changeNewLineMode")},this.getNewLineCharacter=function(){switch(this.$newLineMode){case"windows":return"\\r\\n";case"unix":return"\\n";default:return this.$autoNewLine||"\\n"}},this.$autoNewLine="",this.$newLineMode="auto",this.setNewLineMode=function(newLineMode){this.$newLineMode!==newLineMode&&(this.$newLineMode=newLineMode,this._signal("changeNewLineMode"))},this.getNewLineMode=function(){return this.$newLineMode},this.isNewLine=function(text){return"\\r\\n"==text||"\\r"==text||"\\n"==text},this.getLine=function(row){return this.$lines[row]||""},this.getLines=function(firstRow,lastRow){return this.$lines.slice(firstRow,lastRow+1)},this.getAllLines=function(){return this.getLines(0,this.getLength())},this.getLength=function(){return this.$lines.length},this.getTextRange=function(range){return this.getLinesForRange(range).join(this.getNewLineCharacter())},this.getLinesForRange=function(range){var lines;if(range.start.row===range.end.row)lines=[this.getLine(range.start.row).substring(range.start.column,range.end.column)];else{lines=this.getLines(range.start.row,range.end.row),lines[0]=(lines[0]||"").substring(range.start.column);var l=lines.length-1;range.end.row-range.start.row==l&&(lines[l]=lines[l].substring(0,range.end.column))}return lines},this.insertLines=function(row,lines){return console.warn("Use of document.insertLines is deprecated. Use the insertFullLines method instead."),this.insertFullLines(row,lines)},this.removeLines=function(firstRow,lastRow){return console.warn("Use of document.removeLines is deprecated. Use the removeFullLines method instead."),this.removeFullLines(firstRow,lastRow)},this.insertNewLine=function(position){return console.warn("Use of document.insertNewLine is deprecated. Use insertMergedLines(position, [\'\', \'\']) instead."),this.insertMergedLines(position,["",""])},this.insert=function(position,text){return 1>=this.getLength()&&this.$detectNewLine(text),this.insertMergedLines(position,this.$split(text))},this.insertInLine=function(position,text){var start=this.clippedPos(position.row,position.column),end=this.pos(position.row,position.column+text.length);return this.applyDelta({start:start,end:end,action:"insert",lines:[text]},!0),this.clonePos(end)},this.clippedPos=function(row,column){var length=this.getLength();void 0===row?row=length:0>row?row=0:row>=length&&(row=length-1,column=void 0);var line=this.getLine(row);return void 0==column&&(column=line.length),column=Math.min(Math.max(column,0),line.length),{row:row,column:column}},this.clonePos=function(pos){return{row:pos.row,column:pos.column}},this.pos=function(row,column){return{row:row,column:column}},this.$clipPosition=function(position){var length=this.getLength();return position.row>=length?(position.row=Math.max(0,length-1),position.column=this.getLine(length-1).length):(position.row=Math.max(0,position.row),position.column=Math.min(Math.max(position.column,0),this.getLine(position.row).length)),position},this.insertFullLines=function(row,lines){row=Math.min(Math.max(row,0),this.getLength());var column=0;this.getLength()>row?(lines=lines.concat([""]),column=0):(lines=[""].concat(lines),row--,column=this.$lines[row].length),this.insertMergedLines({row:row,column:column},lines)},this.insertMergedLines=function(position,lines){var start=this.clippedPos(position.row,position.column),end={row:start.row+lines.length-1,column:(1==lines.length?start.column:0)+lines[lines.length-1].length};return this.applyDelta({start:start,end:end,action:"insert",lines:lines}),this.clonePos(end)},this.remove=function(range){var start=this.clippedPos(range.start.row,range.start.column),end=this.clippedPos(range.end.row,range.end.column);return this.applyDelta({start:start,end:end,action:"remove",lines:this.getLinesForRange({start:start,end:end})}),this.clonePos(start)},this.removeInLine=function(row,startColumn,endColumn){var start=this.clippedPos(row,startColumn),end=this.clippedPos(row,endColumn);return this.applyDelta({start:start,end:end,action:"remove",lines:this.getLinesForRange({start:start,end:end})},!0),this.clonePos(start)},this.removeFullLines=function(firstRow,lastRow){firstRow=Math.min(Math.max(0,firstRow),this.getLength()-1),lastRow=Math.min(Math.max(0,lastRow),this.getLength()-1);var deleteFirstNewLine=lastRow==this.getLength()-1&&firstRow>0,deleteLastNewLine=this.getLength()-1>lastRow,startRow=deleteFirstNewLine?firstRow-1:firstRow,startCol=deleteFirstNewLine?this.getLine(startRow).length:0,endRow=deleteLastNewLine?lastRow+1:lastRow,endCol=deleteLastNewLine?0:this.getLine(endRow).length,range=new Range(startRow,startCol,endRow,endCol),deletedLines=this.$lines.slice(firstRow,lastRow+1);return this.applyDelta({start:range.start,end:range.end,action:"remove",lines:this.getLinesForRange(range)}),deletedLines},this.removeNewLine=function(row){this.getLength()-1>row&&row>=0&&this.applyDelta({start:this.pos(row,this.getLine(row).length),end:this.pos(row+1,0),action:"remove",lines:["",""]})},this.replace=function(range,text){if(range instanceof Range||(range=Range.fromPoints(range.start,range.end)),0===text.length&&range.isEmpty())return range.start;if(text==this.getTextRange(range))return range.end;this.remove(range);var end;return end=text?this.insert(range.start,text):range.start},this.applyDeltas=function(deltas){for(var i=0;deltas.length>i;i++)this.applyDelta(deltas[i])},this.revertDeltas=function(deltas){for(var i=deltas.length-1;i>=0;i--)this.revertDelta(deltas[i])},this.applyDelta=function(delta,doNotValidate){var isInsert="insert"==delta.action;(isInsert?1>=delta.lines.length&&!delta.lines[0]:!Range.comparePoints(delta.start,delta.end))||(isInsert&&delta.lines.length>2e4&&this.$splitAndapplyLargeDelta(delta,2e4),applyDelta(this.$lines,delta,doNotValidate),this._signal("change",delta))},this.$splitAndapplyLargeDelta=function(delta,MAX){for(var lines=delta.lines,l=lines.length,row=delta.start.row,column=delta.start.column,from=0,to=0;;){from=to,to+=MAX-1;var chunk=lines.slice(from,to);if(to>l){delta.lines=chunk,delta.start.row=row+from,delta.start.column=column;break}chunk.push(""),this.applyDelta({start:this.pos(row+from,column),end:this.pos(row+to,column=0),action:delta.action,lines:chunk},!0)}},this.revertDelta=function(delta){this.applyDelta({start:this.clonePos(delta.start),end:this.clonePos(delta.end),action:"insert"==delta.action?"remove":"insert",lines:delta.lines.slice()})},this.indexToPosition=function(index,startRow){for(var lines=this.$lines||this.getAllLines(),newlineLength=this.getNewLineCharacter().length,i=startRow||0,l=lines.length;l>i;i++)if(index-=lines[i].length+newlineLength,0>index)return{row:i,column:index+lines[i].length+newlineLength};return{row:l-1,column:lines[l-1].length}},this.positionToIndex=function(pos,startRow){for(var lines=this.$lines||this.getAllLines(),newlineLength=this.getNewLineCharacter().length,index=0,row=Math.min(pos.row,lines.length),i=startRow||0;row>i;++i)index+=lines[i].length+newlineLength;return index+pos.column}}).call(Document.prototype),exports.Document=Document}),ace.define("ace/lib/lang",["require","exports","module"],function(acequire,exports){"use strict";exports.last=function(a){return a[a.length-1]},exports.stringReverse=function(string){return string.split("").reverse().join("")},exports.stringRepeat=function(string,count){for(var result="";count>0;)1&count&&(result+=string),(count>>=1)&&(string+=string);return result};var trimBeginRegexp=/^\\s\\s*/,trimEndRegexp=/\\s\\s*$/;exports.stringTrimLeft=function(string){return string.replace(trimBeginRegexp,"")},exports.stringTrimRight=function(string){return string.replace(trimEndRegexp,"")},exports.copyObject=function(obj){var copy={};for(var key in obj)copy[key]=obj[key];return copy},exports.copyArray=function(array){for(var copy=[],i=0,l=array.length;l>i;i++)copy[i]=array[i]&&"object"==typeof array[i]?this.copyObject(array[i]):array[i];return copy},exports.deepCopy=function deepCopy(obj){if("object"!=typeof obj||!obj)return obj;var copy;if(Array.isArray(obj)){copy=[];for(var key=0;obj.length>key;key++)copy[key]=deepCopy(obj[key]);return copy}var cons=obj.constructor;if(cons===RegExp)return obj;copy=cons();for(var key in obj)copy[key]=deepCopy(obj[key]);return copy},exports.arrayToMap=function(arr){for(var map={},i=0;arr.length>i;i++)map[arr[i]]=1;return map},exports.createMap=function(props){var map=Object.create(null);for(var i in props)map[i]=props[i];return map},exports.arrayRemove=function(array,value){for(var i=0;array.length>=i;i++)value===array[i]&&array.splice(i,1)},exports.escapeRegExp=function(str){return str.replace(/([.*+?^${}()|[\\]\\/\\\\])/g,"\\\\$1")},exports.escapeHTML=function(str){return str.replace(/&/g,"&#38;").replace(/"/g,"&#34;").replace(/\'/g,"&#39;").replace(/<\/g,"&#60;")},exports.getMatchOffsets=function(string,regExp){var matches=[];return string.replace(regExp,function(str){matches.push({offset:arguments[arguments.length-2],length:str.length})}),matches},exports.deferredCall=function(fcn){var timer=null,callback=function(){timer=null,fcn()},deferred=function(timeout){return deferred.cancel(),timer=setTimeout(callback,timeout||0),deferred};return deferred.schedule=deferred,deferred.call=function(){return this.cancel(),fcn(),deferred},deferred.cancel=function(){return clearTimeout(timer),timer=null,deferred},deferred.isPending=function(){return timer},deferred},exports.delayedCall=function(fcn,defaultTimeout){var timer=null,callback=function(){timer=null,fcn()},_self=function(timeout){null==timer&&(timer=setTimeout(callback,timeout||defaultTimeout))};return _self.delay=function(timeout){timer&&clearTimeout(timer),timer=setTimeout(callback,timeout||defaultTimeout)},_self.schedule=_self,_self.call=function(){this.cancel(),fcn()},_self.cancel=function(){timer&&clearTimeout(timer),timer=null},_self.isPending=function(){return timer},_self}}),ace.define("ace/worker/mirror",["require","exports","module","ace/range","ace/document","ace/lib/lang"],function(acequire,exports){"use strict";acequire("../range").Range;var Document=acequire("../document").Document,lang=acequire("../lib/lang"),Mirror=exports.Mirror=function(sender){this.sender=sender;var doc=this.doc=new Document(""),deferredUpdate=this.deferredUpdate=lang.delayedCall(this.onUpdate.bind(this)),_self=this;sender.on("change",function(e){var data=e.data;if(data[0].start)doc.applyDeltas(data);else for(var i=0;data.length>i;i+=2){if(Array.isArray(data[i+1]))var d={action:"insert",start:data[i],lines:data[i+1]};else var d={action:"remove",start:data[i],end:data[i+1]};doc.applyDelta(d,!0)}return _self.$timeout?deferredUpdate.schedule(_self.$timeout):(_self.onUpdate(),void 0)})};(function(){this.$timeout=500,this.setTimeout=function(timeout){this.$timeout=timeout},this.setValue=function(value){this.doc.setValue(value),this.deferredUpdate.schedule(this.$timeout)},this.getValue=function(callbackId){this.sender.callback(this.doc.getValue(),callbackId)},this.onUpdate=function(){},this.isPending=function(){return this.deferredUpdate.isPending()}}).call(Mirror.prototype)}),ace.define("ace/mode/json/json_parse",["require","exports","module"],function(){"use strict";var at,ch,text,value,escapee={\'"\':\'"\',"\\\\":"\\\\","/":"/",b:"\\b",f:"\\f",n:"\\n",r:"\\r",t:"\t"},error=function(m){throw{name:"SyntaxError",message:m,at:at,text:text}},next=function(c){return c&&c!==ch&&error("Expected \'"+c+"\' instead of \'"+ch+"\'"),ch=text.charAt(at),at+=1,ch},number=function(){var number,string="";for("-"===ch&&(string="-",next("-"));ch>="0"&&"9">=ch;)string+=ch,next();if("."===ch)for(string+=".";next()&&ch>="0"&&"9">=ch;)string+=ch;if("e"===ch||"E"===ch)for(string+=ch,next(),("-"===ch||"+"===ch)&&(string+=ch,next());ch>="0"&&"9">=ch;)string+=ch,next();return number=+string,isNaN(number)?(error("Bad number"),void 0):number},string=function(){var hex,i,uffff,string="";if(\'"\'===ch)for(;next();){if(\'"\'===ch)return next(),string;if("\\\\"===ch)if(next(),"u"===ch){for(uffff=0,i=0;4>i&&(hex=parseInt(next(),16),isFinite(hex));i+=1)uffff=16*uffff+hex;string+=String.fromCharCode(uffff)}else{if("string"!=typeof escapee[ch])break;string+=escapee[ch]}else string+=ch}error("Bad string")},white=function(){for(;ch&&" ">=ch;)next()},word=function(){switch(ch){case"t":return next("t"),next("r"),next("u"),next("e"),!0;case"f":return next("f"),next("a"),next("l"),next("s"),next("e"),!1;case"n":return next("n"),next("u"),next("l"),next("l"),null}error("Unexpected \'"+ch+"\'")},array=function(){var array=[];if("["===ch){if(next("["),white(),"]"===ch)return next("]"),array;for(;ch;){if(array.push(value()),white(),"]"===ch)return next("]"),array;next(","),white()}}error("Bad array")},object=function(){var key,object={};if("{"===ch){if(next("{"),white(),"}"===ch)return next("}"),object;for(;ch;){if(key=string(),white(),next(":"),Object.hasOwnProperty.call(object,key)&&error(\'Duplicate key "\'+key+\'"\'),object[key]=value(),white(),"}"===ch)return next("}"),object;next(","),white()}}error("Bad object")};return value=function(){switch(white(),ch){case"{":return object();case"[":return array();case\'"\':return string();case"-":return number();default:return ch>="0"&&"9">=ch?number():word()}},function(source,reviver){var result;return text=source,at=0,ch=" ",result=value(),white(),ch&&error("Syntax error"),"function"==typeof reviver?function walk(holder,key){var k,v,value=holder[key];if(value&&"object"==typeof value)for(k in value)Object.hasOwnProperty.call(value,k)&&(v=walk(value,k),void 0!==v?value[k]=v:delete value[k]);return reviver.call(holder,key,value)}({"":result},""):result}}),ace.define("ace/mode/json_worker",["require","exports","module","ace/lib/oop","ace/worker/mirror","ace/mode/json/json_parse"],function(acequire,exports){"use strict";var oop=acequire("../lib/oop"),Mirror=acequire("../worker/mirror").Mirror,parse=acequire("./json/json_parse"),JsonWorker=exports.JsonWorker=function(sender){Mirror.call(this,sender),this.setTimeout(200)};oop.inherits(JsonWorker,Mirror),function(){this.onUpdate=function(){var value=this.doc.getValue(),errors=[];try{value&&parse(value)}catch(e){var pos=this.doc.indexToPosition(e.at-1);errors.push({row:pos.row,column:pos.column,text:e.message,type:"error"})}this.sender.emit("annotate",errors)}}.call(JsonWorker.prototype)}),ace.define("ace/lib/es5-shim",["require","exports","module"],function(){function Empty(){}function doesDefinePropertyWork(object){try{return Object.defineProperty(object,"sentinel",{}),"sentinel"in object}catch(exception){}}function toInteger(n){return n=+n,n!==n?n=0:0!==n&&n!==1/0&&n!==-(1/0)&&(n=(n>0||-1)*Math.floor(Math.abs(n))),n}Function.prototype.bind||(Function.prototype.bind=function(that){var target=this;if("function"!=typeof target)throw new TypeError("Function.prototype.bind called on incompatible "+target);var args=slice.call(arguments,1),bound=function(){if(this instanceof bound){var result=target.apply(this,args.concat(slice.call(arguments)));return Object(result)===result?result:this}return target.apply(that,args.concat(slice.call(arguments)))};return target.prototype&&(Empty.prototype=target.prototype,bound.prototype=new Empty,Empty.prototype=null),bound});var defineGetter,defineSetter,lookupGetter,lookupSetter,supportsAccessors,call=Function.prototype.call,prototypeOfArray=Array.prototype,prototypeOfObject=Object.prototype,slice=prototypeOfArray.slice,_toString=call.bind(prototypeOfObject.toString),owns=call.bind(prototypeOfObject.hasOwnProperty);if((supportsAccessors=owns(prototypeOfObject,"__defineGetter__"))&&(defineGetter=call.bind(prototypeOfObject.__defineGetter__),defineSetter=call.bind(prototypeOfObject.__defineSetter__),lookupGetter=call.bind(prototypeOfObject.__lookupGetter__),lookupSetter=call.bind(prototypeOfObject.__lookupSetter__)),2!=[1,2].splice(0).length)if(function(){function makeArray(l){var a=Array(l+2);return a[0]=a[1]=0,a}var lengthBefore,array=[];return array.splice.apply(array,makeArray(20)),array.splice.apply(array,makeArray(26)),lengthBefore=array.length,array.splice(5,0,"XXX"),lengthBefore+1==array.length,lengthBefore+1==array.length?!0:void 0\n}()){var array_splice=Array.prototype.splice;Array.prototype.splice=function(start,deleteCount){return arguments.length?array_splice.apply(this,[void 0===start?0:start,void 0===deleteCount?this.length-start:deleteCount].concat(slice.call(arguments,2))):[]}}else Array.prototype.splice=function(pos,removeCount){var length=this.length;pos>0?pos>length&&(pos=length):void 0==pos?pos=0:0>pos&&(pos=Math.max(length+pos,0)),length>pos+removeCount||(removeCount=length-pos);var removed=this.slice(pos,pos+removeCount),insert=slice.call(arguments,2),add=insert.length;if(pos===length)add&&this.push.apply(this,insert);else{var remove=Math.min(removeCount,length-pos),tailOldPos=pos+remove,tailNewPos=tailOldPos+add-remove,tailCount=length-tailOldPos,lengthAfterRemove=length-remove;if(tailOldPos>tailNewPos)for(var i=0;tailCount>i;++i)this[tailNewPos+i]=this[tailOldPos+i];else if(tailNewPos>tailOldPos)for(i=tailCount;i--;)this[tailNewPos+i]=this[tailOldPos+i];if(add&&pos===lengthAfterRemove)this.length=lengthAfterRemove,this.push.apply(this,insert);else for(this.length=lengthAfterRemove+add,i=0;add>i;++i)this[pos+i]=insert[i]}return removed};Array.isArray||(Array.isArray=function(obj){return"[object Array]"==_toString(obj)});var boxedString=Object("a"),splitString="a"!=boxedString[0]||!(0 in boxedString);if(Array.prototype.forEach||(Array.prototype.forEach=function(fun){var object=toObject(this),self=splitString&&"[object String]"==_toString(this)?this.split(""):object,thisp=arguments[1],i=-1,length=self.length>>>0;if("[object Function]"!=_toString(fun))throw new TypeError;for(;length>++i;)i in self&&fun.call(thisp,self[i],i,object)}),Array.prototype.map||(Array.prototype.map=function(fun){var object=toObject(this),self=splitString&&"[object String]"==_toString(this)?this.split(""):object,length=self.length>>>0,result=Array(length),thisp=arguments[1];if("[object Function]"!=_toString(fun))throw new TypeError(fun+" is not a function");for(var i=0;length>i;i++)i in self&&(result[i]=fun.call(thisp,self[i],i,object));return result}),Array.prototype.filter||(Array.prototype.filter=function(fun){var value,object=toObject(this),self=splitString&&"[object String]"==_toString(this)?this.split(""):object,length=self.length>>>0,result=[],thisp=arguments[1];if("[object Function]"!=_toString(fun))throw new TypeError(fun+" is not a function");for(var i=0;length>i;i++)i in self&&(value=self[i],fun.call(thisp,value,i,object)&&result.push(value));return result}),Array.prototype.every||(Array.prototype.every=function(fun){var object=toObject(this),self=splitString&&"[object String]"==_toString(this)?this.split(""):object,length=self.length>>>0,thisp=arguments[1];if("[object Function]"!=_toString(fun))throw new TypeError(fun+" is not a function");for(var i=0;length>i;i++)if(i in self&&!fun.call(thisp,self[i],i,object))return!1;return!0}),Array.prototype.some||(Array.prototype.some=function(fun){var object=toObject(this),self=splitString&&"[object String]"==_toString(this)?this.split(""):object,length=self.length>>>0,thisp=arguments[1];if("[object Function]"!=_toString(fun))throw new TypeError(fun+" is not a function");for(var i=0;length>i;i++)if(i in self&&fun.call(thisp,self[i],i,object))return!0;return!1}),Array.prototype.reduce||(Array.prototype.reduce=function(fun){var object=toObject(this),self=splitString&&"[object String]"==_toString(this)?this.split(""):object,length=self.length>>>0;if("[object Function]"!=_toString(fun))throw new TypeError(fun+" is not a function");if(!length&&1==arguments.length)throw new TypeError("reduce of empty array with no initial value");var result,i=0;if(arguments.length>=2)result=arguments[1];else for(;;){if(i in self){result=self[i++];break}if(++i>=length)throw new TypeError("reduce of empty array with no initial value")}for(;length>i;i++)i in self&&(result=fun.call(void 0,result,self[i],i,object));return result}),Array.prototype.reduceRight||(Array.prototype.reduceRight=function(fun){var object=toObject(this),self=splitString&&"[object String]"==_toString(this)?this.split(""):object,length=self.length>>>0;if("[object Function]"!=_toString(fun))throw new TypeError(fun+" is not a function");if(!length&&1==arguments.length)throw new TypeError("reduceRight of empty array with no initial value");var result,i=length-1;if(arguments.length>=2)result=arguments[1];else for(;;){if(i in self){result=self[i--];break}if(0>--i)throw new TypeError("reduceRight of empty array with no initial value")}do i in this&&(result=fun.call(void 0,result,self[i],i,object));while(i--);return result}),Array.prototype.indexOf&&-1==[0,1].indexOf(1,2)||(Array.prototype.indexOf=function(sought){var self=splitString&&"[object String]"==_toString(this)?this.split(""):toObject(this),length=self.length>>>0;if(!length)return-1;var i=0;for(arguments.length>1&&(i=toInteger(arguments[1])),i=i>=0?i:Math.max(0,length+i);length>i;i++)if(i in self&&self[i]===sought)return i;return-1}),Array.prototype.lastIndexOf&&-1==[0,1].lastIndexOf(0,-3)||(Array.prototype.lastIndexOf=function(sought){var self=splitString&&"[object String]"==_toString(this)?this.split(""):toObject(this),length=self.length>>>0;if(!length)return-1;var i=length-1;for(arguments.length>1&&(i=Math.min(i,toInteger(arguments[1]))),i=i>=0?i:length-Math.abs(i);i>=0;i--)if(i in self&&sought===self[i])return i;return-1}),Object.getPrototypeOf||(Object.getPrototypeOf=function(object){return object.__proto__||(object.constructor?object.constructor.prototype:prototypeOfObject)}),!Object.getOwnPropertyDescriptor){var ERR_NON_OBJECT="Object.getOwnPropertyDescriptor called on a non-object: ";Object.getOwnPropertyDescriptor=function(object,property){if("object"!=typeof object&&"function"!=typeof object||null===object)throw new TypeError(ERR_NON_OBJECT+object);if(owns(object,property)){var descriptor,getter,setter;if(descriptor={enumerable:!0,configurable:!0},supportsAccessors){var prototype=object.__proto__;object.__proto__=prototypeOfObject;var getter=lookupGetter(object,property),setter=lookupSetter(object,property);if(object.__proto__=prototype,getter||setter)return getter&&(descriptor.get=getter),setter&&(descriptor.set=setter),descriptor}return descriptor.value=object[property],descriptor}}}if(Object.getOwnPropertyNames||(Object.getOwnPropertyNames=function(object){return Object.keys(object)}),!Object.create){var createEmpty;createEmpty=null===Object.prototype.__proto__?function(){return{__proto__:null}}:function(){var empty={};for(var i in empty)empty[i]=null;return empty.constructor=empty.hasOwnProperty=empty.propertyIsEnumerable=empty.isPrototypeOf=empty.toLocaleString=empty.toString=empty.valueOf=empty.__proto__=null,empty},Object.create=function(prototype,properties){var object;if(null===prototype)object=createEmpty();else{if("object"!=typeof prototype)throw new TypeError("typeof prototype["+typeof prototype+"] != \'object\'");var Type=function(){};Type.prototype=prototype,object=new Type,object.__proto__=prototype}return void 0!==properties&&Object.defineProperties(object,properties),object}}if(Object.defineProperty){var definePropertyWorksOnObject=doesDefinePropertyWork({}),definePropertyWorksOnDom="undefined"==typeof document||doesDefinePropertyWork(document.createElement("div"));if(!definePropertyWorksOnObject||!definePropertyWorksOnDom)var definePropertyFallback=Object.defineProperty}if(!Object.defineProperty||definePropertyFallback){var ERR_NON_OBJECT_DESCRIPTOR="Property description must be an object: ",ERR_NON_OBJECT_TARGET="Object.defineProperty called on non-object: ",ERR_ACCESSORS_NOT_SUPPORTED="getters & setters can not be defined on this javascript engine";Object.defineProperty=function(object,property,descriptor){if("object"!=typeof object&&"function"!=typeof object||null===object)throw new TypeError(ERR_NON_OBJECT_TARGET+object);if("object"!=typeof descriptor&&"function"!=typeof descriptor||null===descriptor)throw new TypeError(ERR_NON_OBJECT_DESCRIPTOR+descriptor);if(definePropertyFallback)try{return definePropertyFallback.call(Object,object,property,descriptor)}catch(exception){}if(owns(descriptor,"value"))if(supportsAccessors&&(lookupGetter(object,property)||lookupSetter(object,property))){var prototype=object.__proto__;object.__proto__=prototypeOfObject,delete object[property],object[property]=descriptor.value,object.__proto__=prototype}else object[property]=descriptor.value;else{if(!supportsAccessors)throw new TypeError(ERR_ACCESSORS_NOT_SUPPORTED);owns(descriptor,"get")&&defineGetter(object,property,descriptor.get),owns(descriptor,"set")&&defineSetter(object,property,descriptor.set)}return object}}Object.defineProperties||(Object.defineProperties=function(object,properties){for(var property in properties)owns(properties,property)&&Object.defineProperty(object,property,properties[property]);return object}),Object.seal||(Object.seal=function(object){return object}),Object.freeze||(Object.freeze=function(object){return object});try{Object.freeze(function(){})}catch(exception){Object.freeze=function(freezeObject){return function(object){return"function"==typeof object?object:freezeObject(object)}}(Object.freeze)}if(Object.preventExtensions||(Object.preventExtensions=function(object){return object}),Object.isSealed||(Object.isSealed=function(){return!1}),Object.isFrozen||(Object.isFrozen=function(){return!1}),Object.isExtensible||(Object.isExtensible=function(object){if(Object(object)===object)throw new TypeError;for(var name="";owns(object,name);)name+="?";object[name]=!0;var returnValue=owns(object,name);return delete object[name],returnValue}),!Object.keys){var hasDontEnumBug=!0,dontEnums=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],dontEnumsLength=dontEnums.length;for(var key in{toString:null})hasDontEnumBug=!1;Object.keys=function(object){if("object"!=typeof object&&"function"!=typeof object||null===object)throw new TypeError("Object.keys called on a non-object");var keys=[];for(var name in object)owns(object,name)&&keys.push(name);if(hasDontEnumBug)for(var i=0,ii=dontEnumsLength;ii>i;i++){var dontEnum=dontEnums[i];owns(object,dontEnum)&&keys.push(dontEnum)}return keys}}Date.now||(Date.now=function(){return(new Date).getTime()});var ws="\t\\n\x0b\\f\\r   ᠎             　\\u2028\\u2029﻿";if(!String.prototype.trim||ws.trim()){ws="["+ws+"]";var trimBeginRegexp=RegExp("^"+ws+ws+"*"),trimEndRegexp=RegExp(ws+ws+"*$");String.prototype.trim=function(){return(this+"").replace(trimBeginRegexp,"").replace(trimEndRegexp,"")}}var toObject=function(o){if(null==o)throw new TypeError("can\'t convert "+o+" to object");return Object(o)}});'},function(){ace.define("ace/ext/searchbox",["require","exports","module","ace/lib/dom","ace/lib/lang","ace/lib/event","ace/keyboard/hash_handler","ace/lib/keys"],function(n,t){"use strict";var r=n("../lib/dom"),o=n("../lib/lang"),i=n("../lib/event"),f=n("../keyboard/hash_handler").HashHandler,s=n("../lib/keys"),e,u;r.importCssString("\t.ace_search {\tbackground-color: #ddd;\tborder: 1px solid #cbcbcb;\tborder-top: 0 none;\tmax-width: 325px;\toverflow: hidden;\tmargin: 0;\tpadding: 4px;\tpadding-right: 6px;\tpadding-bottom: 0;\tposition: absolute;\ttop: 0px;\tz-index: 99;\twhite-space: normal;\t}\t.ace_search.left {\tborder-left: 0 none;\tborder-radius: 0px 0px 5px 0px;\tleft: 0;\t}\t.ace_search.right {\tborder-radius: 0px 0px 0px 5px;\tborder-right: 0 none;\tright: 0;\t}\t.ace_search_form, .ace_replace_form {\tborder-radius: 3px;\tborder: 1px solid #cbcbcb;\tfloat: left;\tmargin-bottom: 4px;\toverflow: hidden;\t}\t.ace_search_form.ace_nomatch {\toutline: 1px solid red;\t}\t.ace_search_field {\tbackground-color: white;\tborder-right: 1px solid #cbcbcb;\tborder: 0 none;\t-webkit-box-sizing: border-box;\t-moz-box-sizing: border-box;\tbox-sizing: border-box;\tfloat: left;\theight: 22px;\toutline: 0;\tpadding: 0 7px;\twidth: 214px;\tmargin: 0;\t}\t.ace_searchbtn,\t.ace_replacebtn {\tbackground: #fff;\tborder: 0 none;\tborder-left: 1px solid #dcdcdc;\tcursor: pointer;\tfloat: left;\theight: 22px;\tmargin: 0;\tposition: relative;\t}\t.ace_searchbtn:last-child,\t.ace_replacebtn:last-child {\tborder-top-right-radius: 3px;\tborder-bottom-right-radius: 3px;\t}\t.ace_searchbtn:disabled {\tbackground: none;\tcursor: default;\t}\t.ace_searchbtn {\tbackground-position: 50% 50%;\tbackground-repeat: no-repeat;\twidth: 27px;\t}\t.ace_searchbtn.prev {\tbackground-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAFCAYAAAB4ka1VAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAADFJREFUeNpiSU1NZUAC/6E0I0yACYskCpsJiySKIiY0SUZk40FyTEgCjGgKwTRAgAEAQJUIPCE+qfkAAAAASUVORK5CYII=);    \t}\t.ace_searchbtn.next {\tbackground-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAFCAYAAAB4ka1VAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAADRJREFUeNpiTE1NZQCC/0DMyIAKwGJMUAYDEo3M/s+EpvM/mkKwCQxYjIeLMaELoLMBAgwAU7UJObTKsvAAAAAASUVORK5CYII=);    \t}\t.ace_searchbtn_close {\tbackground: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA4AAAAcCAYAAABRVo5BAAAAZ0lEQVR42u2SUQrAMAhDvazn8OjZBilCkYVVxiis8H4CT0VrAJb4WHT3C5xU2a2IQZXJjiQIRMdkEoJ5Q2yMqpfDIo+XY4k6h+YXOyKqTIj5REaxloNAd0xiKmAtsTHqW8sR2W5f7gCu5nWFUpVjZwAAAABJRU5ErkJggg==) no-repeat 50% 0;\tborder-radius: 50%;\tborder: 0 none;\tcolor: #656565;\tcursor: pointer;\tfloat: right;\tfont: 16px/16px Arial;\theight: 14px;\tmargin: 5px 1px 9px 5px;\tpadding: 0;\ttext-align: center;\twidth: 14px;\t}\t.ace_searchbtn_close:hover {\tbackground-color: #656565;\tbackground-position: 50% 100%;\tcolor: white;\t}\t.ace_replacebtn.prev {\twidth: 54px\t}\t.ace_replacebtn.next {\twidth: 27px\t}\t.ace_button {\tmargin-left: 2px;\tcursor: pointer;\t-webkit-user-select: none;\t-moz-user-select: none;\t-o-user-select: none;\t-ms-user-select: none;\tuser-select: none;\toverflow: hidden;\topacity: 0.7;\tborder: 1px solid rgba(100,100,100,0.23);\tpadding: 1px;\t-moz-box-sizing: border-box;\tbox-sizing:    border-box;\tcolor: black;\t}\t.ace_button:hover {\tbackground-color: #eee;\topacity:1;\t}\t.ace_button:active {\tbackground-color: #ddd;\t}\t.ace_button.checked {\tborder-color: #3399ff;\topacity:1;\t}\t.ace_search_options{\tmargin-bottom: 3px;\ttext-align: right;\t-webkit-user-select: none;\t-moz-user-select: none;\t-o-user-select: none;\t-ms-user-select: none;\tuser-select: none;\t}","ace_searchbox");e='<div class="ace_search right">\t    <button type="button" action="hide" class="ace_searchbtn_close"><\/button>\t    <div class="ace_search_form">\t        <input class="ace_search_field" placeholder="Search for" spellcheck="false"><\/input>\t        <button type="button" action="findNext" class="ace_searchbtn next"><\/button>\t        <button type="button" action="findPrev" class="ace_searchbtn prev"><\/button>\t        <button type="button" action="findAll" class="ace_searchbtn" title="Alt-Enter">All<\/button>\t    <\/div>\t    <div class="ace_replace_form">\t        <input class="ace_search_field" placeholder="Replace with" spellcheck="false"><\/input>\t        <button type="button" action="replaceAndFindNext" class="ace_replacebtn">Replace<\/button>\t        <button type="button" action="replaceAll" class="ace_replacebtn">All<\/button>\t    <\/div>\t    <div class="ace_search_options">\t        <span action="toggleRegexpMode" class="ace_button" title="RegExp Search">.*<\/span>\t        <span action="toggleCaseSensitive" class="ace_button" title="CaseSensitive Search">Aa<\/span>\t        <span action="toggleWholeWords" class="ace_button" title="Whole Word Search">\\b<\/span>\t    <\/div>\t<\/div>'.replace(/>\s+/g,">");u=function(n){var t=r.createElement("div");t.innerHTML=e;this.element=t.firstChild;this.$init();this.setEditor(n)},function(){this.setEditor=function(n){n.searchBox=this;n.container.appendChild(this.element);this.editor=n};this.$initElements=function(n){this.searchBox=n.querySelector(".ace_search_form");this.replaceBox=n.querySelector(".ace_replace_form");this.searchOptions=n.querySelector(".ace_search_options");this.regExpOption=n.querySelector("[action=toggleRegexpMode]");this.caseSensitiveOption=n.querySelector("[action=toggleCaseSensitive]");this.wholeWordOption=n.querySelector("[action=toggleWholeWords]");this.searchInput=this.searchBox.querySelector(".ace_search_field");this.replaceInput=this.replaceBox.querySelector(".ace_search_field")};this.$init=function(){var t=this.element,n;this.$initElements(t);n=this;i.addListener(t,"mousedown",function(t){setTimeout(function(){n.activeInput.focus()},0);i.stopPropagation(t)});i.addListener(t,"click",function(t){var u=t.target||t.srcElement,r=u.getAttribute("action");r&&n[r]?n[r]():n.$searchBarKb.commands[r]&&n.$searchBarKb.commands[r].exec(n);i.stopPropagation(t)});i.addCommandKeyListener(t,function(t,r,u){var e=s.keyCodeToString(u),f=n.$searchBarKb.findKeyCommand(r,e);f&&f.exec&&(f.exec(n),i.stopEvent(t))});this.$onChange=o.delayedCall(function(){n.find(!1,!1)});i.addListener(this.searchInput,"input",function(){n.$onChange.schedule(20)});i.addListener(this.searchInput,"focus",function(){n.activeInput=n.searchInput;n.searchInput.value&&n.highlight()});i.addListener(this.replaceInput,"focus",function(){n.activeInput=n.replaceInput;n.searchInput.value&&n.highlight()})};this.$closeSearchBarKb=new f([{bindKey:"Esc",name:"closeSearchBar",exec:function(n){n.searchBox.hide()}}]);this.$searchBarKb=new f;this.$searchBarKb.bindKeys({"Ctrl-f|Command-f":function(n){var t=n.isReplace=!n.isReplace;n.replaceBox.style.display=t?"":"none";n.searchInput.focus()},"Ctrl-H|Command-Option-F":function(n){n.replaceBox.style.display="";n.replaceInput.focus()},"Ctrl-G|Command-G":function(n){n.findNext()},"Ctrl-Shift-G|Command-Shift-G":function(n){n.findPrev()},esc:function(n){setTimeout(function(){n.hide()})},Return:function(n){n.activeInput==n.replaceInput&&n.replace();n.findNext()},"Shift-Return":function(n){n.activeInput==n.replaceInput&&n.replace();n.findPrev()},"Alt-Return":function(n){n.activeInput==n.replaceInput&&n.replaceAll();n.findAll()},Tab:function(n){(n.activeInput==n.replaceInput?n.searchInput:n.replaceInput).focus()}});this.$searchBarKb.addCommands([{name:"toggleRegexpMode",bindKey:{win:"Alt-R|Alt-/",mac:"Ctrl-Alt-R|Ctrl-Alt-/"},exec:function(n){n.regExpOption.checked=!n.regExpOption.checked;n.$syncOptions()}},{name:"toggleCaseSensitive",bindKey:{win:"Alt-C|Alt-I",mac:"Ctrl-Alt-R|Ctrl-Alt-I"},exec:function(n){n.caseSensitiveOption.checked=!n.caseSensitiveOption.checked;n.$syncOptions()}},{name:"toggleWholeWords",bindKey:{win:"Alt-B|Alt-W",mac:"Ctrl-Alt-B|Ctrl-Alt-W"},exec:function(n){n.wholeWordOption.checked=!n.wholeWordOption.checked;n.$syncOptions()}}]);this.$syncOptions=function(){r.setCssClass(this.regExpOption,"checked",this.regExpOption.checked);r.setCssClass(this.wholeWordOption,"checked",this.wholeWordOption.checked);r.setCssClass(this.caseSensitiveOption,"checked",this.caseSensitiveOption.checked);this.find(!1,!1)};this.highlight=function(n){this.editor.session.highlight(n||this.editor.$search.$options.re);this.editor.renderer.updateBackMarkers()};this.find=function(n,t,i){var f=this.editor.find(this.searchInput.value,{skipCurrent:n,backwards:t,wrap:!0,regExp:this.regExpOption.checked,caseSensitive:this.caseSensitiveOption.checked,wholeWord:this.wholeWordOption.checked,preventScroll:i}),u=!f&&this.searchInput.value;r.setCssClass(this.searchBox,"ace_nomatch",u);this.editor._emit("findSearchBox",{match:!u});this.highlight()};this.findNext=function(){this.find(!0,!1)};this.findPrev=function(){this.find(!0,!0)};this.findAll=function(){var t=this.editor.findAll(this.searchInput.value,{regExp:this.regExpOption.checked,caseSensitive:this.caseSensitiveOption.checked,wholeWord:this.wholeWordOption.checked}),n=!t&&this.searchInput.value;r.setCssClass(this.searchBox,"ace_nomatch",n);this.editor._emit("findSearchBox",{match:!n});this.highlight();this.hide()};this.replace=function(){this.editor.getReadOnly()||this.editor.replace(this.replaceInput.value)};this.replaceAndFindNext=function(){this.editor.getReadOnly()||(this.editor.replace(this.replaceInput.value),this.findNext())};this.replaceAll=function(){this.editor.getReadOnly()||this.editor.replaceAll(this.replaceInput.value)};this.hide=function(){this.element.style.display="none";this.editor.keyBinding.removeKeyboardHandler(this.$closeSearchBarKb);this.editor.focus()};this.show=function(n,t){this.element.style.display="";this.replaceBox.style.display=t?"":"none";this.isReplace=t;n&&(this.searchInput.value=n);this.find(!1,!1,!0);this.searchInput.focus();this.searchInput.select();this.editor.keyBinding.addKeyboardHandler(this.$closeSearchBarKb)};this.isFocused=function(){var n=document.activeElement;return n==this.searchInput||n==this.replaceInput}}.call(u.prototype);t.SearchBox=u;t.Search=function(n,t){var i=n.searchBox||new u(n);i.show(n.session.getTextRange(),t)}}),function(){ace.acequire(["ace/ext/searchbox"],function(){})}()},function(){ace.define("ace/theme/jsoneditor",["require","exports","module","ace/lib/dom"],function(n,t){t.isDark=!1;t.cssClass="ace-jsoneditor";t.cssText='.ace-jsoneditor .ace_gutter {\tbackground: #ebebeb;\tcolor: #333\t}\t\t.ace-jsoneditor.ace_editor {\tfont-family: droid sans mono, consolas, monospace, courier new, courier, sans-serif;\tline-height: 1.3;\t}\t.ace-jsoneditor .ace_print-margin {\twidth: 1px;\tbackground: #e8e8e8\t}\t.ace-jsoneditor .ace_scroller {\tbackground-color: #FFFFFF\t}\t.ace-jsoneditor .ace_text-layer {\tcolor: gray\t}\t.ace-jsoneditor .ace_variable {\tcolor: #1a1a1a\t}\t.ace-jsoneditor .ace_cursor {\tborder-left: 2px solid #000000\t}\t.ace-jsoneditor .ace_overwrite-cursors .ace_cursor {\tborder-left: 0px;\tborder-bottom: 1px solid #000000\t}\t.ace-jsoneditor .ace_marker-layer .ace_selection {\tbackground: lightgray\t}\t.ace-jsoneditor.ace_multiselect .ace_selection.ace_start {\tbox-shadow: 0 0 3px 0px #FFFFFF;\tborder-radius: 2px\t}\t.ace-jsoneditor .ace_marker-layer .ace_step {\tbackground: rgb(255, 255, 0)\t}\t.ace-jsoneditor .ace_marker-layer .ace_bracket {\tmargin: -1px 0 0 -1px;\tborder: 1px solid #BFBFBF\t}\t.ace-jsoneditor .ace_marker-layer .ace_active-line {\tbackground: #FFFBD1\t}\t.ace-jsoneditor .ace_gutter-active-line {\tbackground-color : #dcdcdc\t}\t.ace-jsoneditor .ace_marker-layer .ace_selected-word {\tborder: 1px solid lightgray\t}\t.ace-jsoneditor .ace_invisible {\tcolor: #BFBFBF\t}\t.ace-jsoneditor .ace_keyword,\t.ace-jsoneditor .ace_meta,\t.ace-jsoneditor .ace_support.ace_constant.ace_property-value {\tcolor: #AF956F\t}\t.ace-jsoneditor .ace_keyword.ace_operator {\tcolor: #484848\t}\t.ace-jsoneditor .ace_keyword.ace_other.ace_unit {\tcolor: #96DC5F\t}\t.ace-jsoneditor .ace_constant.ace_language {\tcolor: darkorange\t}\t.ace-jsoneditor .ace_constant.ace_numeric {\tcolor: red\t}\t.ace-jsoneditor .ace_constant.ace_character.ace_entity {\tcolor: #BF78CC\t}\t.ace-jsoneditor .ace_invalid {\tcolor: #FFFFFF;\tbackground-color: #FF002A;\t}\t.ace-jsoneditor .ace_fold {\tbackground-color: #AF956F;\tborder-color: #000000\t}\t.ace-jsoneditor .ace_storage,\t.ace-jsoneditor .ace_support.ace_class,\t.ace-jsoneditor .ace_support.ace_function,\t.ace-jsoneditor .ace_support.ace_other,\t.ace-jsoneditor .ace_support.ace_type {\tcolor: #C52727\t}\t.ace-jsoneditor .ace_string {\tcolor: green\t}\t.ace-jsoneditor .ace_comment {\tcolor: #BCC8BA\t}\t.ace-jsoneditor .ace_entity.ace_name.ace_tag,\t.ace-jsoneditor .ace_entity.ace_other.ace_attribute-name {\tcolor: #606060\t}\t.ace-jsoneditor .ace_markup.ace_underline {\ttext-decoration: underline\t}\t.ace-jsoneditor .ace_indent-guide {\tbackground: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAACCAYAAACZgbYnAAAAE0lEQVQImWP4////f4bLly//BwAmVgd1/w11/gAAAABJRU5ErkJggg==") right repeat-y\t}';var i=n("../lib/dom");i.importCssString(t.cssText,t.cssClass)})}])});
//# sourceMappingURL=jsoneditor-minimalist.min.js.map
